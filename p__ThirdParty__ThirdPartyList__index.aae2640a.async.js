(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[241],{57660:function(_,O,r){"use strict";r.r(O),r.d(O,{default:function(){return Q}});var z=r(15009),m=r.n(z),w=r(99289),F=r.n(w),H=r(5574),E=r.n(H),Z=r(92861),U=r(65763),G=r(90930),J=r(38521),o=r(94272),p=r(58073),K=r(86738),g=r(2453),A=r(83622),W=r(67294),y=r(37476),d=r(34994),M=r(26915),x=r(37804),V=r(72269),L=r(52720),e=r(85893),B=function(S){var T=S.visible,R=S.onVisibleChange,C=S.onFinish,u=S.currentUser,v=(0,W.useRef)(),P=(0,o.useIntl)(),b=function(){var h=F()(m()().mark(function i(s){var c,a;return m()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=u.guid,n.next=4,Z.Z.thirdParty.update(a,s.orgName,s.tradingFeeRate,s.commissionRate,s.icon,s.isPublic,s.maxDelegateWallets,s.chainWalletWriteLimit,s.delegateWalletWriteLimit);case 4:g.ZP.success("success"),R(!1),C(),(c=v.current)===null||c===void 0||c.resetFields(),n.next=15;break;case 10:return n.prev=10,n.t0=n.catch(0),console.error(n.t0),g.ZP.error("error: "+String(n.t0)),n.abrupt("return",!1);case 15:case"end":return n.stop()}},i,null,[[0,10]])}));return function(s){return h.apply(this,arguments)}}();return(0,W.useEffect)(function(){if(u){var h;(h=v.current)===null||h===void 0||h.setFieldsValue({orgName:u.orgName,tradingFeeRate:u.tradingFeeRate/100,commissionRate:u.commissionRate/100,icon:u.icon,isPublic:u.isPublic,maxDelegateWallets:u.maxDelegateWallets,chainWalletWriteLimit:u.chainWalletWriteLimit,delegateWalletWriteLimit:u.delegateWalletWriteLimit})}}),(0,e.jsxs)(y.Y,{open:T,onOpenChange:function(i){if(!i){var s;v==null||(s=v.current)===null||s===void 0||s.resetFields(),R(i)}},clearOnDestroy:!0,onFinish:b,formRef:v,children:[(0,e.jsx)(d.A.Item,{name:"orgName",label:P.formatMessage({id:"pages.thirdParty.orgName"}),rules:[{required:!0,message:"Please enter Organization Name!"}],children:(0,e.jsx)(M.Z,{max:24})}),(0,e.jsx)(d.A.Item,{name:"tradingFeeRate",label:P.formatMessage({id:"pages.thirdParty.tradingFeeRate"}),rules:[{required:!0,message:"Please enter Trading Fee Rate!"}],initialValue:2,children:(0,e.jsx)(x.Z,{size:"large",addonAfter:"%",precision:2,min:0,max:2})}),(0,e.jsx)(d.A.Item,{name:"commissionRate",label:P.formatMessage({id:"pages.thirdParty.commissionRate"}),rules:[{required:!0,message:"Please enter Commission Rate!"}],initialValue:30,children:(0,e.jsx)(x.Z,{size:"large",addonAfter:"%",precision:2,min:0,max:60})}),(0,e.jsx)(d.A.Item,{name:"icon",label:P.formatMessage({id:"icon"}),children:(0,e.jsx)(L.Ur,{uploadFinish:function(i){var s;(s=v.current)===null||s===void 0||s.setFieldsValue({icon:i})},url:u==null?void 0:u.icon})}),(0,e.jsx)(d.A.Item,{name:"isPublic",label:P.formatMessage({id:"pages.thirdParty.isPublic"}),initialValue:!0,children:(0,e.jsx)(V.Z,{})}),(0,e.jsx)(d.A.Item,{name:"maxDelegateWallets",label:P.formatMessage({id:"pages.thirdParty.maxDelegateWallets"}),initialValue:0,children:(0,e.jsx)(x.Z,{size:"large",min:0,max:999999999})}),(0,e.jsx)(d.A.Item,{name:"chainWalletWriteLimit",label:P.formatMessage({id:"pages.thirdParty.chainWalletWriteLimit"}),initialValue:0,children:(0,e.jsx)(x.Z,{size:"large",min:0,max:99999})}),(0,e.jsx)(d.A.Item,{name:"delegateWalletWriteLimit",label:P.formatMessage({id:"pages.thirdParty.delegateWalletWriteLimit"}),initialValue:0,children:(0,e.jsx)(x.Z,{size:"large",min:0,max:99999})})]})},D=B,N=function(){var S=(0,W.useState)(void 0),T=E()(S,2),R=T[0],C=T[1],u=(0,W.useState)(!1),v=E()(u,2),P=v[0],b=v[1],h=(0,W.useRef)(),i=(0,o.useIntl)(),s=[{title:i.formatMessage({id:"icon"}),dataIndex:"icon",hideInSearch:!0,render:function(a,l){return l.icon?(0,e.jsx)(p.Z,{src:l.icon,width:32,height:32}):(0,e.jsx)("div",{})}},{title:i.formatMessage({id:"name"}),dataIndex:"orgName",hideInSearch:!0},{title:"Guid",dataIndex:"guid"},{title:"Email",dataIndex:"email",hideInSearch:!0},{title:i.formatMessage({id:"status"}),dataIndex:"status",hideInSearch:!0,valueEnum:{enabled:{text:"Enabled",color:"green"},disabled:{text:"Disabled",color:"red"}}},{title:i.formatMessage({id:"pages.thirdParty.userNums"}),dataIndex:"userNums",hideInSearch:!0},{title:i.formatMessage({id:"pages.thirdParty.volumes"}),dataIndex:"volumes",hideInSearch:!0,renderText:function(a){return"$"+(0,U.BW)(a,3)}},{title:i.formatMessage({id:"pages.thirdParty.txns"}),dataIndex:"txns",hideInSearch:!0},{title:i.formatMessage({id:"pages.thirdParty.feeRate"}),dataIndex:"tradingFeeRate",hideInSearch:!0,renderText:function(a){return a/100+"%"}},{title:i.formatMessage({id:"pages.thirdParty.commissionRate"}),dataIndex:"commissionRate",hideInSearch:!0,renderText:function(a){return a/100+"%"}},{title:i.formatMessage({id:"pages.thirdParty.channelCommission"}),dataIndex:"channelCommission",hideInSearch:!0,renderText:function(a){return"$"+(0,U.BW)(a,3)}},{title:"API Key",dataIndex:"apiKey",hideInSearch:!0},{title:"Package",dataIndex:"aveCloudLevel",hideInSearch:!0,valueEnum:{0:{text:"Free",color:"blue"},1:{text:"Level1",color:"green"},2:{text:"Level2",color:"green"},3:{text:"Level3",color:"green"},4:{text:"Enterprise",color:"red"}}},{title:"Chain Write Limit",dataIndex:"chainWalletWriteLimit",hideInSearch:!0},{title:"Bot Write Limit",dataIndex:"delegateWalletWriteLimit",hideInSearch:!0},{title:"Delegate Wallets",hideInSearch:!0,render:function(a,l){return"".concat(l.currentDelegateWalletCount,"/").concat(l.maxDelegateWallets)}},{title:"IsPublic",dataIndex:"isPublic",hideInSearch:!0,valueEnum:{true:{text:"Y",color:"green"},false:{text:"N",color:"red"}}},{title:i.formatMessage({id:"options"}),hideInSearch:!0,render:function(a,l){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(K.Z,{title:"Reset API Key",description:"Are you sure to Reset API Key?",onConfirm:F()(m()().mark(function n(){var j;return m()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.prev=0,f.next=3,Z.Z.thirdParty.resetApiKey(l.guid);case 3:g.ZP.success("Reset API Key success"),(j=h.current)===null||j===void 0||j.reload(),f.next=12;break;case 7:return f.prev=7,f.t0=f.catch(0),console.error(f.t0),g.ZP.error("Reset API Key error:"+String(f.t0)),f.abrupt("return",!1);case 12:case"end":return f.stop()}},n,null,[[0,7]])})),okText:"Yes",cancelText:"No",children:(0,e.jsx)(A.ZP,{type:"link",children:"Reset API Key"})}),(0,e.jsx)(K.Z,{title:"Send API Key",description:"Are you sure to Send API Key to ".concat(l.email,"?"),onConfirm:F()(m()().mark(function n(){return m()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Z.Z.thirdParty.sendApiKey(l.guid);case 3:g.ZP.success("Send API Key success"),t.next=11;break;case 6:return t.prev=6,t.t0=t.catch(0),console.error(t.t0),g.ZP.error("Send API Key error:"+String(t.t0)),t.abrupt("return",!1);case 11:case"end":return t.stop()}},n,null,[[0,6]])})),okText:"Yes",cancelText:"No",children:(0,e.jsx)(A.ZP,{type:"link",children:"Send API Key"})}),(0,e.jsx)(A.ZP,{type:"link",onClick:function(){C(l),b(!0)},children:"Edit"})]})}}];return(0,e.jsxs)(G._z,{children:[(0,e.jsx)(J.Z,{actionRef:h,rowKey:"guid",search:{labelWidth:120},columns:s,request:function(){var c=F()(m()().mark(function a(l,n){var j,t,f,q,k,Y,$;return m()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:f=!1,q="",I.t0=m()().keys(n);case 3:if((I.t1=I.t0()).done){I.next=11;break}return k=I.t1.value,q=k,Y=n[k],(Y==null?void 0:Y.toString())=="descend"&&(f=!0),I.abrupt("break",11);case 11:return l.page=l==null?void 0:l.current,delete l.current,I.next=15,Z.Z.thirdParty.getPageList(l);case 15:return $=I.sent,I.abrupt("return",{data:(j=$.data)===null||j===void 0?void 0:j.list,success:$.code==0,total:(t=$.data)===null||t===void 0?void 0:t.total});case 17:case"end":return I.stop()}},a)}));return function(a,l){return c.apply(this,arguments)}}(),scroll:{x:!0}}),(0,e.jsx)(D,{visible:P,onVisibleChange:function(a){b(a),a||C(void 0)},onFinish:function(){var a;(a=h.current)===null||a===void 0||a.reload(),C(void 0)},currentUser:R||void 0})]})},Q=N},65763:function(_,O,r){"use strict";r.d(O,{BW:function(){return Z},Cd:function(){return J},q0:function(){return G},rD:function(){return U}});var z=r(64599),m=r.n(z),w=r(27484),F=r.n(w),H=r(90482),E=r(84105);function Z(o,p){if(!o)return"";var K=new H.Z(o),g=o.split(".");if(g.length!==2)return o;for(var A=g[0],W=g[1],y=0,d="",M=0;M<W.length;M++){var x=W[M];if(d.length>=p)break;x=="0"&&d.length==0?y=y+1:d=d+x}return y>3?A+".0{"+y+"}"+d:A+"."+"0".repeat(y)+d}function U(o,p,K,g,A,W){var y=new Set,d=new Set,M=m()(g),x;try{for(M.s();!(x=M.n()).done;){var V=x.value;y.add(V[o]),d.add(V[p])}}catch(t){M.e(t)}finally{M.f()}console.log("mainKeyList",y),console.log("timeKeyList",d);var L=new Map,e=m()(g),B;try{for(e.s();!(B=e.n()).done;){var D=B.value,N=D[p],Q=D[o],X=D[K];L.has(N)||L.set(N,new Map),L.get(N).set(Q,X)}}catch(t){e.e(t)}finally{e.f()}console.log("tempMap",L);var S=[],T=[];T.push("time");var R=m()(y),C;try{for(R.s();!(C=R.n()).done;){var u=C.value;T.push(u)}}catch(t){R.e(t)}finally{R.f()}S.push(T);var v=m()(d),P;try{for(v.s();!(P=v.n()).done;){var b=P.value,h=[];h.push(b);var i=m()(y),s;try{for(i.s();!(s=i.n()).done;){var c=s.value;L.has(b)&&L.get(b).has(c)?h.push(L.get(b).get(c)):h.push("")}}catch(t){i.e(t)}finally{i.f()}S.push(h)}}catch(t){v.e(t)}finally{v.f()}var a=E.P6.aoa_to_sheet(S),l=E.P6.book_new();E.P6.book_append_sheet(l,a,"Sheet1");var n="";A=="daily"?n="(\u6BCF\u65E5)":A=="monthly"&&(n="(\u6BCF\u6708)");var j="".concat(F()().format("YYYYMMDDHHmmss")).concat(W.replaceAll(" ","")).concat(n,".xlsx");E.NC(l,j)}function G(o){var p=parseFloat(o);return p.toLocaleString("en-US")}function J(o,p){return o?o.length<=2*p?o:o.slice(0,p)+"***"+o.slice(-p):""}},20067:function(){}}]);
