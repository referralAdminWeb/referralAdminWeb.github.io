"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[80],{5966:function(ee,x,a){var I=a(97685),T=a(1413),k=a(91),f=a(21770),F=a(53025),D=a(55241),U=a(97435),y=a(67294),g=a(59348),h=a(85893),W=["fieldProps","proFieldProps"],$=["fieldProps","proFieldProps"],L="text",K=function(l){var n=l.fieldProps,M=l.proFieldProps,v=(0,k.Z)(l,W);return(0,h.jsx)(g.Z,(0,T.Z)({valueType:L,fieldProps:n,filedConfig:{valueType:L},proFieldProps:M},v))},Y=function(l){var n=(0,f.Z)(l.open||!1,{value:l.open,onChange:l.onOpenChange}),M=(0,I.Z)(n,2),v=M[0],R=M[1];return(0,h.jsx)(F.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(i){var A,b=i.getFieldValue(l.name||[]);return(0,h.jsx)(D.Z,(0,T.Z)((0,T.Z)({getPopupContainer:function(p){return p&&p.parentNode?p.parentNode:p},onOpenChange:function(p){return R(p)},content:(0,h.jsxs)("div",{style:{padding:"4px 0"},children:[(A=l.statusRender)===null||A===void 0?void 0:A.call(l,b),l.strengthText?(0,h.jsx)("div",{style:{marginTop:10},children:(0,h.jsx)("span",{children:l.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},l.popoverProps),{},{open:v,children:l.children}))}})},B=function(l){var n=l.fieldProps,M=l.proFieldProps,v=(0,k.Z)(l,$),R=(0,y.useState)(!1),j=(0,I.Z)(R,2),i=j[0],A=j[1];return n!=null&&n.statusRender&&v.name?(0,h.jsx)(Y,{name:v.name,statusRender:n==null?void 0:n.statusRender,popoverProps:n==null?void 0:n.popoverProps,strengthText:n==null?void 0:n.strengthText,open:i,onOpenChange:A,children:(0,h.jsx)("div",{children:(0,h.jsx)(g.Z,(0,T.Z)({valueType:"password",fieldProps:(0,T.Z)((0,T.Z)({},(0,U.Z)(n,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(E){var p;n==null||(p=n.onBlur)===null||p===void 0||p.call(n,E),A(!1)},onClick:function(E){var p;n==null||(p=n.onClick)===null||p===void 0||p.call(n,E),A(!0)}}),proFieldProps:M,filedConfig:{valueType:L}},v))})}):(0,h.jsx)(g.Z,(0,T.Z)({valueType:"password",fieldProps:n,proFieldProps:M,filedConfig:{valueType:L}},v))},P=K;P.Password=B,P.displayName="ProFormComponent",x.Z=P},9255:function(ee,x,a){a.r(x),a.d(x,{default:function(){return b}});var I=a(19632),T=a.n(I),k=a(15009),f=a.n(k),F=a(99289),D=a.n(F),U=a(5574),y=a.n(U),g=a(75456),h=a(51042),W=a(90930),$=a(38521),L=a(37476),K=a(5966),Y=a(94272),B=a(28248),P=a(2453),Z=a(83622),l=a(86738),n=a(14e3),M=a(27484),v=a.n(M),R=a(67294),j=[{path:"/user",layout:!1,routes:[{name:"login",path:"/user/login",component:"./User/Login"}]},{path:"/overall",name:"overall",icon:"DashboardOutlined",access:"checkAccess",component:"./Overall"},{path:"/account",routes:[{name:"setting",path:"/account/setting",component:"./Account/Setting"}]},{path:"/adminList",name:"adminList",icon:"UserOutlined",access:"isSuperAdmin",component:"./AdminList"},{path:"/role",name:"role",icon:"UserSwitchOutlined",access:"isSuperAdmin",component:"./Role"},{path:"/userInfo",name:"botUserData",icon:"TeamOutlined",access:"checkAccess",component:"./TradersRanking"},{path:"/botTradingData",name:"botTradingData",icon:"ShoppingCartOutlined",access:"checkAccess",routes:[{name:"botTradingData",path:"/botTradingData/btTradingData",component:"./BotTradingData/BotTradingData"},{name:"newUsersOnPlatforms",path:"/botTradingData/newUsers",component:"./BotTradingData/NewUsers"},{name:"channelTrafficAnalysis",path:"/botTradingData/channelTraffic",component:"./BotTradingData/ChannelTraffic"},{name:"traders",path:"/botTradingData/traders",component:"./BotTradingData/Traders"}]},{path:"/thirdPartyList",name:"thirdPartyList",icon:"ApiOutlined",access:"checkAccess",component:"./ThirdParty/ThirdPartyList"},{path:"/rebateManagement",name:"rebateManagement",icon:"TeamOutlined",access:"checkAccess",routes:[{name:"vipList",path:"/rebateManagement/vipList",component:"./VipList"},{name:"channelRebateList",path:"/rebateManagement/channelRebateList",component:"./RebateManagement/channelRebateList.tsx"}]},{path:"/wholePlatformData",name:"wholePlatformData",icon:"DatabaseOutlined",access:"checkAccess",component:"./WholePlatformData"},{path:"/promotionTrack",name:"promotionTrack",icon:"NodeIndexOutlined",access:"checkAccess",component:"./PromotionTrack"},{path:"/contract",name:"contract",icon:"AuditOutlined",access:"checkAccess",component:"./Contract"},{path:"/",redirect:"/overall"},{path:"*",layout:!1,component:"./404"}],i=a(85893),A=function(){var p=B.Z.useModal(),z=y()(p,2),he=z[0],ae=z[1],re=(0,R.useState)(!1),G=y()(re,2),te=G[0],V=G[1],ne=(0,R.useState)(!1),J=y()(ne,2),Q=J[0],X=J[1],se=(0,R.useState)(),q=y()(se,2),w=q[0],oe=q[1],le=(0,R.useState)([]),_=y()(le,2),C=_[0],N=_[1],H=(0,R.useRef)(),u=(0,Y.useIntl)(),ie=function(){var c=D()(f()().mark(function t(r){var o,s;return f()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,g.deleteRole)(r);case 3:if(s=e.sent,s.code===0){e.next=9;break}if(s.code!=-2){e.next=8;break}return P.ZP.error(s.msg),e.abrupt("return",!1);case 8:throw s.msg;case 9:return P.ZP.success(u.formatMessage({id:"pages.vipList.update.success"})),(o=H.current)===null||o===void 0||o.reload(),e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),P.ZP.error(u.formatMessage({id:"pages.vipList.update.error"})),e.abrupt("return",!1);case 18:case"end":return e.stop()}},t,null,[[0,14]])}));return function(r){return c.apply(this,arguments)}}(),de=function(){var c=D()(f()().mark(function t(r){var o,s;return f()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,g.addRole)(r.role);case 3:if(s=e.sent,s.code===0){e.next=9;break}if(s.code!=-2){e.next=8;break}return P.ZP.error(s.msg),e.abrupt("return",!1);case 8:throw s.msg;case 9:return P.ZP.success(u.formatMessage({id:"pages.vipList.update.success"})),(o=H.current)===null||o===void 0||o.reload(),e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),P.ZP.error(u.formatMessage({id:"pages.vipList.update.error"})),e.abrupt("return",!1);case 18:case"end":return e.stop()}},t,null,[[0,14]])}));return function(r){return c.apply(this,arguments)}}(),ue=function(){var c=D()(f()().mark(function t(r){var o;return f()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,g.getRoleAccessList)(r.role);case 2:o=d.sent,N(o.data||[]),oe(r),X(!0);case 6:case"end":return d.stop()}},t)}));return function(r){return c.apply(this,arguments)}}(),ce=[{title:"ID",dataIndex:"id",formItemProps:{normalize:function(t){return t==null?void 0:t.trim()}}},{title:u.formatMessage({id:"createTime"}),dataIndex:"createTime",hideInSearch:!0,render:function(t,r){return(0,i.jsx)(i.Fragment,{children:v()(r.createTime).format("YYYY-MM-DD HH:mm:ss")})}},{title:u.formatMessage({id:"updateTime"}),dataIndex:"updateTime",hideInSearch:!0,render:function(t,r){return(0,i.jsx)(i.Fragment,{children:v()(r.updateTime).format("YYYY-MM-DD HH:mm:ss")})}},{title:u.formatMessage({id:"role"}),dataIndex:"role",hideInSearch:!0,renderText:function(t,r){return u.formatMessage({id:r.role})}},{title:u.formatMessage({id:"pages.vipList.options"}),dataIndex:"option",valueType:"option",hideInDescriptions:!0,render:function(t,r){var o=[];return r.role!=="superAdmin"&&o.push((0,i.jsx)(Z.ZP,{type:"link",onClick:function(){return ue(r)},children:"\u4FEE\u6539\u6743\u9650"}),(0,i.jsx)(l.Z,{title:u.formatMessage({id:"pages.role.delete"}),description:u.formatMessage({id:"pages.role.delete.comfirm"},{role:r.role}),onConfirm:D()(f()().mark(function s(){return f()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie(r.role);case 2:case"end":return e.stop()}},s)})),children:(0,i.jsxs)(Z.ZP,{style:{marginRight:10},type:"link",children:[u.formatMessage({id:"delete"})," "]})})),o}}],pe=function(){return j.filter(function(t){return t.name&&t.access=="checkAccess"}).map(function(t){return{title:u.formatMessage({id:"menu.".concat(t.name)}),key:t.name}})},me=function(){var c=D()(f()().mark(function t(r){var o,s,d,e,S;return f()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(o=r,!(o.length>C.length)){m.next=16;break}s="",d=0;case 4:if(!(d<o.length)){m.next=11;break}if(C.includes(o[d])){m.next=8;break}return s=o[d],m.abrupt("break",11);case 8:d++,m.next=4;break;case 11:return m.next=13,(0,g.editRoleAccess)(w.role,s,!0);case 13:N([].concat(T()(C),[s])),m.next=29;break;case 16:if(!(o.length<C.length)){m.next=29;break}e="",S=0;case 19:if(!(S<C.length)){m.next=26;break}if(o.includes(C[S])){m.next=23;break}return e=C[S],m.abrupt("break",26);case 23:S++,m.next=19;break;case 26:return m.next=28,(0,g.editRoleAccess)(w.role,e,!1);case 28:N(C.filter(function(fe){return fe!==e}));case 29:case"end":return m.stop()}},t)}));return function(r){return c.apply(this,arguments)}}();return(0,i.jsxs)(W._z,{children:[(0,i.jsx)($.Z,{actionRef:H,toolBarRender:function(){return[(0,i.jsxs)(Z.ZP,{type:"primary",onClick:function(){V(!0)},children:[(0,i.jsx)(h.Z,{}),u.formatMessage({id:"new"})]},"primary")]},rowKey:"id",search:{labelWidth:120},request:function(){var c=D()(f()().mark(function t(r,o){var s,d,e;return f()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return console.log(o),r.page=r==null?void 0:r.current,delete r.current,O.next=5,(0,g.getRolePageList)(r);case 5:return e=O.sent,O.abrupt("return",{data:(s=e.data)===null||s===void 0?void 0:s.list,success:e.code==0,total:(d=e.data)===null||d===void 0?void 0:d.total});case 7:case"end":return O.stop()}},t)}));return function(t,r){return c.apply(this,arguments)}}(),columns:ce}),(0,i.jsx)(L.Y,{title:u.formatMessage({id:"pages.role.new"}),open:te,onFinish:de,onOpenChange:V,children:(0,i.jsx)(K.Z,{name:"role",fieldProps:{maxLength:24},label:u.formatMessage({id:"role"}),rules:[{required:!0,message:"Please enter role!"},{min:2,message:"length min 2"}]})}),w&&Q&&(0,i.jsx)(B.Z,{title:u.formatMessage({id:"editRole"}),open:Q,onCancel:function(){return X(!1)},footer:null,children:(0,i.jsx)(n.Z,{checkable:!0,onCheck:me,defaultCheckedKeys:C,treeData:pe()})}),ae]})},b=A}}]);
