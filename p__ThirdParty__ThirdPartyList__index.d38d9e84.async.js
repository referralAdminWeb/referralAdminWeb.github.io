(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[241],{57660:function(_,V,e){"use strict";e.r(V),e.d(V,{default:function(){return Q}});var w=e(15009),v=e.n(w),H=e(99289),Z=e.n(H),G=e(5574),T=e.n(G),K=e(92861),B=e(65763),k=e(90930),x=e(38521),M=e(94272),Y=e(58073),S=e(86738),p=e(2453),L=e(83622),c=e(67294),y=e(37476),o=e(34994),E=e(26915),b=e(37804),R=e(72269),D=e(52720),r=e(85893),N=function(W){var j=W.visible,C=W.onVisibleChange,F=W.onFinish,l=W.currentUser,P=(0,c.useRef)(),f=(0,M.useIntl)(),A=function(){var h=Z()(v()().mark(function s(n){var m,t;return v()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,t=l.guid,i.next=4,K.Z.thirdParty.update(t,n.orgName,n.tradingFeeRate,n.commissionRate,n.icon,n.isPublic,n.maxDelegateWallets,n.chainWalletWriteLimit,n.delegateWalletWriteLimit);case 4:p.ZP.success("success"),C(!1),F(),(m=P.current)===null||m===void 0||m.resetFields(),i.next=15;break;case 10:return i.prev=10,i.t0=i.catch(0),console.error(i.t0),p.ZP.error("error: "+String(i.t0)),i.abrupt("return",!1);case 15:case"end":return i.stop()}},s,null,[[0,10]])}));return function(n){return h.apply(this,arguments)}}();return(0,c.useEffect)(function(){if(l){var h;(h=P.current)===null||h===void 0||h.setFieldsValue({orgName:l.orgName,tradingFeeRate:l.tradingFeeRate/100,commissionRate:l.commissionRate/100,icon:l.icon,isPublic:l.isPublic,maxDelegateWallets:l.maxDelegateWallets,chainWalletWriteLimit:l.chainWalletWriteLimit,delegateWalletWriteLimit:l.delegateWalletWriteLimit})}}),(0,r.jsxs)(y.Y,{open:j,onOpenChange:function(s){if(!s){var n;P==null||(n=P.current)===null||n===void 0||n.resetFields(),C(s)}},clearOnDestroy:!0,onFinish:A,formRef:P,children:[(0,r.jsx)(o.A.Item,{name:"orgName",label:f.formatMessage({id:"pages.thirdParty.orgName"}),rules:[{required:!0,message:"Please enter Organization Name!"}],children:(0,r.jsx)(E.Z,{max:24})}),(0,r.jsx)(o.A.Item,{name:"tradingFeeRate",label:f.formatMessage({id:"pages.thirdParty.tradingFeeRate"}),rules:[{required:!0,message:"Please enter Trading Fee Rate!"}],initialValue:2,children:(0,r.jsx)(b.Z,{size:"large",addonAfter:"%",precision:2,min:0,max:2})}),(0,r.jsx)(o.A.Item,{name:"commissionRate",label:f.formatMessage({id:"pages.thirdParty.commissionRate"}),rules:[{required:!0,message:"Please enter Commission Rate!"}],initialValue:30,children:(0,r.jsx)(b.Z,{size:"large",addonAfter:"%",precision:2,min:0,max:60})}),(0,r.jsx)(o.A.Item,{name:"icon",label:f.formatMessage({id:"icon"}),children:(0,r.jsx)(D.Ur,{uploadFinish:function(s){var n;(n=P.current)===null||n===void 0||n.setFieldsValue({icon:s})},url:l==null?void 0:l.icon})}),(0,r.jsx)(o.A.Item,{name:"isPublic",label:f.formatMessage({id:"pages.thirdParty.isPublic"}),initialValue:!0,children:(0,r.jsx)(R.Z,{})}),(0,r.jsx)(o.A.Item,{name:"maxDelegateWallets",label:f.formatMessage({id:"pages.thirdParty.maxDelegateWallets"}),initialValue:0,children:(0,r.jsx)(b.Z,{size:"large",min:0,max:999999999})}),(0,r.jsx)(o.A.Item,{name:"chainWalletWriteLimit",label:f.formatMessage({id:"pages.thirdParty.chainWalletWriteLimit"}),initialValue:0,children:(0,r.jsx)(b.Z,{size:"large",min:0,max:99999})}),(0,r.jsx)(o.A.Item,{name:"delegateWalletWriteLimit",label:f.formatMessage({id:"pages.thirdParty.delegateWalletWriteLimit"}),initialValue:0,children:(0,r.jsx)(b.Z,{size:"large",min:0,max:99999})})]})},O=N,J=function(){var W=(0,c.useState)(void 0),j=T()(W,2),C=j[0],F=j[1],l=(0,c.useState)(!1),P=T()(l,2),f=P[0],A=P[1],h=(0,c.useRef)(),s=(0,M.useIntl)(),n=[{title:s.formatMessage({id:"icon"}),dataIndex:"icon",hideInSearch:!0,render:function(t,a){return a.icon?(0,r.jsx)(Y.Z,{src:a.icon,width:32,height:32}):(0,r.jsx)("div",{})}},{title:s.formatMessage({id:"name"}),dataIndex:"orgName",hideInSearch:!0},{title:"Guid",dataIndex:"guid"},{title:"Email",dataIndex:"email",hideInSearch:!0},{title:s.formatMessage({id:"status"}),dataIndex:"status",hideInSearch:!0,valueEnum:{enabled:{text:"Enabled",color:"green"},disabled:{text:"Disabled",color:"red"}}},{title:s.formatMessage({id:"pages.thirdParty.userNums"}),dataIndex:"userNums",hideInSearch:!0},{title:s.formatMessage({id:"pages.thirdParty.volumes"}),dataIndex:"volumes",hideInSearch:!0,renderText:function(t){return"$"+(0,B.BW)(t,3)}},{title:s.formatMessage({id:"pages.thirdParty.txns"}),dataIndex:"txns",hideInSearch:!0},{title:s.formatMessage({id:"pages.thirdParty.feeRate"}),dataIndex:"tradingFeeRate",hideInSearch:!0,renderText:function(t){return t/100+"%"}},{title:s.formatMessage({id:"pages.thirdParty.commissionRate"}),dataIndex:"commissionRate",hideInSearch:!0,renderText:function(t){return t/100+"%"}},{title:s.formatMessage({id:"pages.thirdParty.channelCommission"}),dataIndex:"channelCommission",hideInSearch:!0,renderText:function(t){return"$"+(0,B.BW)(t,3)}},{title:"API Key",dataIndex:"apiKey",hideInSearch:!0},{title:"Package",dataIndex:"aveCloudLevel",hideInSearch:!0,valueEnum:{0:{text:"Free",color:"blue"},1:{text:"Level1",color:"green"},2:{text:"Level2",color:"green"},3:{text:"Level3",color:"green"},4:{text:"Enterprise",color:"red"}}},{title:"Chain Write Limit",dataIndex:"chainWalletWriteLimit",hideInSearch:!0},{title:"Bot Write Limit",dataIndex:"delegateWalletWriteLimit",hideInSearch:!0},{title:"Delegate Wallets",hideInSearch:!0,render:function(t,a){return"".concat(a.currentDelegateWalletCount,"/").concat(a.maxDelegateWallets)}},{title:"IsPublic",dataIndex:"isPublic",hideInSearch:!0,valueEnum:{true:{text:"Y",color:"green"},false:{text:"N",color:"red"}}},{title:s.formatMessage({id:"options"}),hideInSearch:!0,render:function(t,a){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S.Z,{title:"Reset API Key",description:"Are you sure to Reset API Key?",onConfirm:Z()(v()().mark(function i(){var d;return v()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.prev=0,g.next=3,K.Z.thirdParty.resetApiKey(a.guid);case 3:p.ZP.success("Reset API Key success"),(d=h.current)===null||d===void 0||d.reload(),g.next=12;break;case 7:return g.prev=7,g.t0=g.catch(0),console.error(g.t0),p.ZP.error("Reset API Key error:"+String(g.t0)),g.abrupt("return",!1);case 12:case"end":return g.stop()}},i,null,[[0,7]])})),okText:"Yes",cancelText:"No",children:(0,r.jsx)(L.ZP,{type:"link",children:"Reset API Key"})}),(0,r.jsx)(S.Z,{title:"Send API Key",description:"Are you sure to Send API Key to ".concat(a.email,"?"),onConfirm:Z()(v()().mark(function i(){return v()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,K.Z.thirdParty.sendApiKey(a.guid);case 3:p.ZP.success("Send API Key success"),u.next=11;break;case 6:return u.prev=6,u.t0=u.catch(0),console.error(u.t0),p.ZP.error("Send API Key error:"+String(u.t0)),u.abrupt("return",!1);case 11:case"end":return u.stop()}},i,null,[[0,6]])})),okText:"Yes",cancelText:"No",children:(0,r.jsx)(L.ZP,{type:"link",children:"Send API Key"})}),(0,r.jsx)(L.ZP,{type:"link",onClick:function(){F(a),A(!0)},children:"Edit"})]})}}];return(0,r.jsxs)(k._z,{children:[(0,r.jsx)(x.Z,{actionRef:h,rowKey:"guid",search:{labelWidth:120},columns:n,request:function(){var m=Z()(v()().mark(function t(a,i){var d,u,g,q,X,$,z;return v()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:g=!1,q="",I.t0=v()().keys(i);case 3:if((I.t1=I.t0()).done){I.next=11;break}return X=I.t1.value,q=X,$=i[X],($==null?void 0:$.toString())=="descend"&&(g=!0),I.abrupt("break",11);case 11:return a.page=a==null?void 0:a.current,delete a.current,I.next=15,K.Z.thirdParty.getPageList(a);case 15:return z=I.sent,I.abrupt("return",{data:(d=z.data)===null||d===void 0?void 0:d.list,success:z.code==0,total:(u=z.data)===null||u===void 0?void 0:u.total});case 17:case"end":return I.stop()}},t)}));return function(t,a){return m.apply(this,arguments)}}(),scroll:{x:!0}}),(0,r.jsx)(O,{visible:f,onVisibleChange:function(t){A(t),t||F(void 0)},onFinish:function(){var t;(t=h.current)===null||t===void 0||t.reload(),F(void 0)},currentUser:C||void 0})]})},Q=J},65763:function(_,V,e){"use strict";e.d(V,{BW:function(){return K},q0:function(){return k},rD:function(){return B}});var w=e(64599),v=e.n(w),H=e(27484),Z=e.n(H),G=e(90482),T=e(84105);function K(x,M){if(!x)return"";var Y=new G.Z(x),S=x.split(".");if(S.length!==2)return x;for(var p=S[0],L=S[1],c=0,y="",o=0;o<L.length;o++){var E=L[o];if(y.length>=M)break;E=="0"&&y.length==0?c=c+1:y=y+E}return c>3?p+".0{"+c+"}"+y:p+"."+"0".repeat(c)+y}function B(x,M,Y,S,p,L){var c=new Set,y=new Set,o=v()(S),E;try{for(o.s();!(E=o.n()).done;){var b=E.value;c.add(b[x]),y.add(b[M])}}catch(d){o.e(d)}finally{o.f()}console.log("mainKeyList",c),console.log("timeKeyList",y);var R=new Map,D=v()(S),r;try{for(D.s();!(r=D.n()).done;){var N=r.value,O=N[M],J=N[x],Q=N[Y];R.has(O)||R.set(O,new Map),R.get(O).set(J,Q)}}catch(d){D.e(d)}finally{D.f()}console.log("tempMap",R);var U=[],W=[];W.push("time");var j=v()(c),C;try{for(j.s();!(C=j.n()).done;){var F=C.value;W.push(F)}}catch(d){j.e(d)}finally{j.f()}U.push(W);var l=v()(y),P;try{for(l.s();!(P=l.n()).done;){var f=P.value,A=[];A.push(f);var h=v()(c),s;try{for(h.s();!(s=h.n()).done;){var n=s.value;R.has(f)&&R.get(f).has(n)?A.push(R.get(f).get(n)):A.push("")}}catch(d){h.e(d)}finally{h.f()}U.push(A)}}catch(d){l.e(d)}finally{l.f()}var m=T.P6.aoa_to_sheet(U),t=T.P6.book_new();T.P6.book_append_sheet(t,m,"Sheet1");var a="";p=="daily"?a="(\u6BCF\u65E5)":p=="monthly"&&(a="(\u6BCF\u6708)");var i="".concat(Z()().format("YYYYMMDDHHmmss")).concat(L.replaceAll(" ","")).concat(a,".xlsx");T.NC(t,i)}function k(x){var M=parseFloat(x);return M.toLocaleString("en-US")}},20067:function(){}}]);
