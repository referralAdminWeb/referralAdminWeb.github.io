(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[228],{21595:function(Ue,De,t){"use strict";t.d(De,{F:function(){return ye}});var be=t(15009),g=t.n(be),Ie=t(99289),B=t.n(Ie),Le=t(5574),u=t.n(Le),Pe=t(92276),Te=t(6742),x=t(65763),ie=t(94272),S=t(2453),j=t(96074),te=t(96068),s=t(67294),k=t(92861),h={remark:"remark___CVbP6",line2:"line2___S0KK2",label:"label___pGraW",label2:"label2___Ggjak",row:"row___H12AQ",title:"title___Axy1u"},$=t(97857),i=t.n($),E=t(93463),_=t(48096),e=t(85893),A=function(O){var f,L=O.guid,U=(0,s.useState)("1"),n=u()(U,2),R=n[0],J=n[1],X=(0,s.useState)(!1),D=u()(X,2),se=D[0],N=D[1],q=(0,s.useState)([]),Z=u()(q,2),F=Z[0],K=Z[1],ee=(0,s.useState)({pagination:{showSizeChanger:!1,current:1,pageSize:5}}),w=u()(ee,2),y=w[0],m=w[1],l=(0,ie.useIntl)(),ae=[{key:"1",label:l.formatMessage({id:"tier1"})},{key:"2",label:l.formatMessage({id:"tier2"})},{key:"3",label:l.formatMessage({id:"tier3"})},{key:"4",label:l.formatMessage({id:"tier4"})},{key:"5",label:l.formatMessage({id:"tier5"})}],b=[{title:l.formatMessage({id:"date"}),dataIndex:"time"},{title:l.formatMessage({id:"pages.newUserCount"}),dataIndex:"newUser"},{title:l.formatMessage({id:"pages.tradingUserCount"}),dataIndex:"traders"},{title:l.formatMessage({id:"pages.tradingVol"}),dataIndex:"txAmount",render:function(r){return"$"+(0,x.BW)(r,3)}},{title:l.formatMessage({id:"pages.txs"}),dataIndex:"txCount"}],H=function(r,o,v){var a;m({pagination:r}),r.pageSize!==((a=y.pagination)===null||a===void 0?void 0:a.pageSize)&&K([])},V=function(){var c=B()(g()().mark(function r(){var o,v,a,I;return g()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return N(!0),a=Number(R),d.next=4,(0,E.getTierDailyStatisticaPageList)(L,a,(o=(v=y.pagination)===null||v===void 0?void 0:v.current)!==null&&o!==void 0?o:1);case 4:I=d.sent,I.data&&(K(I.data.list),m(i()(i()({},y),{},{pagination:i()(i()({},y.pagination),{},{total:I.data.total})})),N(!1));case 6:case"end":return d.stop()}},r)}));return function(){return c.apply(this,arguments)}}();return(0,s.useEffect)(function(){V()},[(f=y.pagination)===null||f===void 0?void 0:f.current]),(0,s.useEffect)(function(){V()},[R]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("h3",{children:l.formatMessage({id:"pages.dailyStatistics"})}),(0,e.jsx)(_.Z,{defaultActiveKey:R,items:ae,onChange:function(r){return J(r)}}),(0,e.jsx)(te.Z,{columns:b,rowKey:function(r){return r.time},dataSource:F,pagination:y.pagination,loading:se,onChange:H})]})},ne=A,xe=t(64599),ce=t.n(xe),fe=t(45433),$e=t(74656),Ee=t(26915),le=t(83622),me=t(27484),Q=t.n(me),re=t(84105),Re=fe.default.RangePicker,oe=function(O){var f,L=O.guid,U=(0,s.useState)(!1),n=u()(U,2),R=n[0],J=n[1],X=(0,s.useState)([]),D=u()(X,2),se=D[0],N=D[1],q=(0,s.useState)("guid"),Z=u()(q,2),F=Z[0],K=Z[1],ee=(0,s.useState)(""),w=u()(ee,2),y=w[0],m=w[1],l=(0,s.useState)({pagination:{showSizeChanger:!1,current:1,pageSize:5}}),ae=u()(l,2),b=ae[0],H=ae[1],V=Q()().startOf("day"),c=V.add(-7,"day"),r=[c,V],o=s.useState(c.format("YYYY-MM-DD")),v=u()(o,2),a=v[0],I=v[1],Ce=s.useState(V.format("YYYY-MM-DD")),d=u()(Ce,2),Me=d[0],Ne=d[1],Ze=function(p,C){I(C[0]),Ne(C[1])},je=(0,ie.useIntl)(),Ye=[{title:"Register Time",dataIndex:"createTime",render:function(p,C){return Q()(C.createTime).format("YYYY-MM-DD")}},{title:"Guid",dataIndex:"guid"},{title:"Email",dataIndex:"email"},{title:"TgUsername",dataIndex:"tgUsername"},{title:"RefCode",dataIndex:"refCode"},{title:je.formatMessage({id:"pages.thirdParty.volumes"}),dataIndex:"totalVolume",key:"totalVolume",render:function(p,C){return(0,x.q0)((0,x.BW)(C.totalVolume,3))}}],ke=function(p,C,P){var M;H({pagination:p}),p.pageSize!==((M=b.pagination)===null||M===void 0?void 0:M.pageSize)&&N([])},We=function(){var W=B()(g()().mark(function p(){var C,P,M,z,pe,Y,T;return g()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return J(!0),pe=(C=(P=b.pagination)===null||P===void 0?void 0:P.current)!==null&&C!==void 0?C:1,Y=(M=(z=b.pagination)===null||z===void 0?void 0:z.pageSize)!==null&&M!==void 0?M:10,G.next=5,k.Z.userData.getFirstTirerList(L,pe,Y,F,y,a,Me);case 5:T=G.sent,T.data&&(N(T.data.list),H(i()(i()({},b),{},{pagination:i()(i()({},b.pagination),{},{total:T.data.total})})),J(!1));case 7:case"end":return G.stop()}},p)}));return function(){return W.apply(this,arguments)}}();(0,s.useEffect)(function(){We()},[(f=b.pagination)===null||f===void 0?void 0:f.current,a,Me]);var Ae=function(){var W=B()(g()().mark(function p(){return g()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:H(i()(i()({},b),{},{pagination:i()(i()({},b.pagination),{},{current:1})})),We();case 2:case"end":return P.stop()}},p)}));return function(){return W.apply(this,arguments)}}(),Oe=[{value:"guid",label:"Guid"},{value:"email",label:"Email"},{value:"tgUsername",label:"TgUsername"},{value:"refCode",label:"RefCode"}];function Fe(){return we.apply(this,arguments)}function we(){return we=B()(g()().mark(function W(){var p,C,P,M,z,pe,Y,T,Ve,G,Be;return g()().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.next=2,k.Z.userData.getFirstTirerList(L,1,99999,F,y,a,Me);case 2:p=he.sent,C=p==null?void 0:p.data.list,console.log(C),P=[],M=[],M.push("Register Time"),M.push("Guid"),M.push("Email"),M.push("TgUsername"),M.push("RefCode"),M.push("Volume($)"),P.push(M),z=ce()(C);try{for(z.s();!(pe=z.n()).done;)Y=pe.value,T=[],T.push(Q()(Y.createTime).format("YYYY-MM-DD")),T.push(Y.guid),T.push(Y.email),T.push(Y.tgUsername),T.push(Y.refCode),T.push(Y.totalVolume),P.push(T)}catch(Ke){z.e(Ke)}finally{z.f()}Ve=re.P6.aoa_to_sheet(P),G=re.P6.book_new(),re.P6.book_append_sheet(G,Ve,"Sheet1"),Be="".concat(L,"_first_tirer_list_").concat(a,"_").concat(Me,".xlsx"),re.NC(G,Be);case 21:case"end":return he.stop()}},W)})),we.apply(this,arguments)}return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"title",children:[(0,e.jsx)("div",{children:je.formatMessage({id:"pages.vipList.listOfTirer1"})}),(0,e.jsx)("div",{children:(0,e.jsx)($e.Z,{options:Oe,value:F,onChange:K})}),(0,e.jsx)("div",{children:(0,e.jsx)(Ee.Z,{style:{width:120},value:y,onChange:function(p){return m(p.target.value)}})}),(0,e.jsx)("div",{style:{marginLeft:10},children:"Trading Time"}),(0,e.jsx)("div",{children:(0,e.jsx)(Re,{style:{width:260},onChange:Ze,defaultValue:r})}),(0,e.jsx)("div",{children:(0,e.jsx)(le.ZP,{onClick:Ae,children:je.formatMessage({id:"search"})})}),(0,e.jsx)("div",{children:(0,e.jsx)(le.ZP,{type:"link",onClick:Fe,children:je.formatMessage({id:"export"})})})]}),(0,e.jsx)(te.Z,{columns:Ye,rowKey:function(p){return p.guid},dataSource:se,pagination:b.pagination,loading:R,onChange:ke})]})},Se=oe,de=function(O){var f,L=O.guid,U=(0,s.useState)("1"),n=u()(U,2),R=n[0],J=n[1],X=(0,s.useState)(!1),D=u()(X,2),se=D[0],N=D[1],q=(0,s.useState)([]),Z=u()(q,2),F=Z[0],K=Z[1],ee=(0,s.useState)({pagination:{showSizeChanger:!1,current:1,pageSize:5}}),w=u()(ee,2),y=w[0],m=w[1],l=(0,ie.useIntl)(),ae=[{key:"1",label:l.formatMessage({id:"tier1"})},{key:"2",label:l.formatMessage({id:"tier2"})},{key:"3",label:l.formatMessage({id:"tier3"})},{key:"4",label:l.formatMessage({id:"tier4"})},{key:"5",label:l.formatMessage({id:"tier5"})}],b=[{title:l.formatMessage({id:"date"}),dataIndex:"time"},{title:l.formatMessage({id:"pages.newUserCount"}),dataIndex:"newUser"},{title:l.formatMessage({id:"pages.tradingUserCount"}),dataIndex:"traders"},{title:l.formatMessage({id:"pages.tradingVol"}),dataIndex:"txAmount",render:function(r){return"$"+(0,x.BW)(r,3)}},{title:l.formatMessage({id:"pages.txs"}),dataIndex:"txCount"}],H=function(r,o,v){var a;m({pagination:r}),r.pageSize!==((a=y.pagination)===null||a===void 0?void 0:a.pageSize)&&K([])},V=function(){var c=B()(g()().mark(function r(){var o,v,a,I;return g()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return N(!0),a=Number(R),d.next=4,(0,E.getTierMonthlyStatisticaPageList)(L,a,(o=(v=y.pagination)===null||v===void 0?void 0:v.current)!==null&&o!==void 0?o:1);case 4:I=d.sent,I.data&&(K(I.data.list),m(i()(i()({},y),{},{pagination:i()(i()({},y.pagination),{},{total:I.data.total})})),N(!1));case 6:case"end":return d.stop()}},r)}));return function(){return c.apply(this,arguments)}}();return(0,s.useEffect)(function(){V()},[(f=y.pagination)===null||f===void 0?void 0:f.current]),(0,s.useEffect)(function(){V()},[R]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("h3",{children:l.formatMessage({id:"pages.monthlyStatistics"})}),(0,e.jsx)(_.Z,{defaultActiveKey:R,items:ae,onChange:function(r){return J(r)}}),(0,e.jsx)(te.Z,{columns:b,rowKey:function(r){return r.time},dataSource:F,pagination:y.pagination,loading:se,onChange:H})]})},ue=de,ve=function(O){var f=O.guid,L=(0,s.useState)(void 0),U=u()(L,2),n=U[0],R=U[1],J=(0,s.useState)(),X=u()(J,2),D=X[0],se=X[1],N=(0,s.useState)([]),q=u()(N,2),Z=q[0],F=q[1],K=S.ZP.useMessage(),ee=u()(K,2),w=ee[0],y=ee[1],m=(0,ie.useIntl)(),l=[{title:"",dataIndex:"type",key:"type"},{title:m.formatMessage({id:"pages.vipList.total"}),dataIndex:"total",key:"total"},{title:"1",dataIndex:"level1",key:"level1"},{title:"2",dataIndex:"level2",key:"level2"},{title:"3",dataIndex:"level3",key:"level3"},{title:"4",dataIndex:"level4",key:"level4"},{title:"5",dataIndex:"level5",key:"level5"}],ae=[{title:"Guid",dataIndex:"guid"},{title:"Tg Username",dataIndex:"tgUsername"},{title:"Email",dataIndex:"email"},{title:m.formatMessage({id:"pages.vipList.refCode"}),dataIndex:"refCode"},{title:m.formatMessage({id:"pages.vipList.vipLevel"}),dataIndex:"vip",valueEnum:{vip1:{text:"VIP1",color:"#000000"},vip2:{text:"VIP2",color:"#CD7F32"},vip3:{text:"VIP3",color:"#FFD700"},svip:{text:"SVIP",color:"#87CEFA"}}},{},{title:m.formatMessage({id:"pages.vipList.remark"}),dataIndex:"remark",span:2}],b=[{title:"ID",dataIndex:"id",hideInSearch:!0,hidden:!0},{title:m.formatMessage({id:"date"}),dataIndex:"date",hideInSearch:!0},{title:"Txns",dataIndex:"txns",hideInSearch:!0},{title:"Vol",dataIndex:"vol",hideInSearch:!0,renderText:function(r,o,v,a){return"$"+(0,x.BW)(r,3)}}],H=function(){var c=B()(g()().mark(function r(){var o;return g()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,k.Z.rebate.getRebateDetail(f);case 2:o=a.sent,o.data&&R(o.data);case 4:case"end":return a.stop()}},r)}));return function(){return c.apply(this,arguments)}}(),V=function(){if(n){var r=[],o=[];return n.platformList.forEach(function(v){o.push(v.platform);var a="";v.platform=="tg"?a="Channel TG Rebate Ratio:":v.platform=="web"?a="Channel Web Rebate Ratio:":v.platform=="third"&&(a="3rd Party Channel Rebate Ratio:"),r.push((0,e.jsxs)("div",{className:h.row,children:[(0,e.jsx)("span",{className:h.label2,children:a}),(0,e.jsxs)("span",{children:[" ",v.commissionRate/100,"%"]})]}))}),(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:h.row,children:[(0,e.jsx)("span",{className:h.label2,children:"Channel Type:"}),(0,e.jsxs)("span",{children:[" ",o.join("/")]})]}),r,(0,e.jsxs)("div",{className:h.row,children:[(0,e.jsx)("span",{className:h.label2,children:"Referral Commission:"}),(0,e.jsxs)("span",{children:[" ","$"+(0,x.BW)(n.refCommission,3)]})]}),(0,e.jsxs)("div",{className:h.row,children:[(0,e.jsx)("span",{className:h.label2,children:"Channel Commission:"}),(0,e.jsxs)("span",{children:[" ","$"+(0,x.BW)(n.channelCommission,3)]})]}),(0,e.jsxs)("div",{className:h.row,children:[(0,e.jsx)("span",{className:h.label2,children:m.formatMessage({id:"pages.vipList.totalCommission"})}),(0,e.jsxs)("span",{children:[" ","$"+(0,x.BW)(n.totalCommission,3)]})]}),(0,e.jsxs)("div",{className:h.row,children:[(0,e.jsx)("span",{className:h.label2,children:m.formatMessage({id:"pages.vipList.unclaimedCommission"})}),(0,e.jsxs)("span",{children:[" ","$"+(0,x.BW)(n.unclaimedCommission,3)]})]}),(0,e.jsxs)("div",{className:h.row,children:[(0,e.jsx)("span",{className:h.label2,children:m.formatMessage({id:"pages.vipList.claimedCommission"})}),(0,e.jsxs)("span",{children:[" ","$"+(0,x.BW)(n.claimedCommission,3)]})]})]})}else return(0,e.jsx)(e.Fragment,{})};return(0,s.useEffect)(function(){var c=function(){var r=B()(g()().mark(function o(){var v,a,I;return g()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return w.loading("load..."),d.prev=1,d.next=4,(0,Te.getVipDetail)(f);case 4:v=d.sent,se(v),a=v,I=[{type:m.formatMessage({id:"pages.vipList.invitee"}),total:a.totalInviteeCount+"",level1:a.inviteeCountList[0]+"",level2:a.inviteeCountList[1]+"",level3:a.inviteeCountList[2]+"",level4:a.inviteeCountList[3]+"",level5:a.inviteeCountList[4]+""},{type:m.formatMessage({id:"pages.vipList.volume24H"}),total:"$"+(0,x.BW)(a.totalInviteeVolume24H,6),level1:"$"+(0,x.BW)(a.inviteeVolume24HList[0],6),level2:"$"+(0,x.BW)(a.inviteeVolume24HList[1],6),level3:"$"+(0,x.BW)(a.inviteeVolume24HList[2],6),level4:"$"+(0,x.BW)(a.inviteeVolume24HList[3],6),level5:"$"+(0,x.BW)(a.inviteeVolume24HList[4],6)}],F(I),d.next=14;break;case 11:d.prev=11,d.t0=d.catch(1),S.ZP.error(m.formatMessage({id:"pages.vipList.getVipDetail.error"}));case 14:w.destroy();case 15:case"end":return d.stop()}},o,null,[[1,11]])}));return function(){return r.apply(this,arguments)}}();c(),H()},[]),(0,e.jsxs)("div",{children:[D&&(0,e.jsx)(Pe.ZP,{column:2,title:m.formatMessage({id:"pages.vipList.detail.view"}),request:B()(g()().mark(function c(){return g()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",{data:D||{}});case 1:case"end":return o.stop()}},c)})),params:{guid:D==null?void 0:D.guid},columns:ae}),n&&V(),(0,e.jsx)(j.Z,{}),(0,e.jsx)(te.Z,{columns:l,dataSource:Z,pagination:!1}),(0,e.jsx)(j.Z,{}),(0,e.jsx)(ne,{guid:f}),(0,e.jsx)(ue,{guid:f}),(0,e.jsx)(j.Z,{}),(0,e.jsx)(Se,{guid:f})]})},ye=ve},65763:function(Ue,De,t){"use strict";t.d(De,{BW:function(){return Pe},Cd:function(){return ie},q0:function(){return x},rD:function(){return Te}});var be=t(64599),g=t.n(be),Ie=t(27484),B=t.n(Ie),Le=t(90482),u=t(84105);function Pe(S,j){if(!S)return"";var te=new Le.Z(S),s=S.split(".");if(s.length!==2)return S;for(var k=s[0],h=s[1],$=0,i="",E=0;E<h.length;E++){var _=h[E];if(i.length>=j)break;_=="0"&&i.length==0?$=$+1:i=i+_}return $>3?k+".0{"+$+"}"+i:k+"."+"0".repeat($)+i}function Te(S,j,te,s,k,h){var $=new Set,i=new Set,E=g()(s),_;try{for(E.s();!(_=E.n()).done;){var e=_.value;$.add(e[S]),i.add(e[j])}}catch(n){E.e(n)}finally{E.f()}console.log("mainKeyList",$),console.log("timeKeyList",i);var A=new Map,ne=g()(s),xe;try{for(ne.s();!(xe=ne.n()).done;){var ce=xe.value,fe=ce[j],$e=ce[S],Ee=ce[te];A.has(fe)||A.set(fe,new Map),A.get(fe).set($e,Ee)}}catch(n){ne.e(n)}finally{ne.f()}console.log("tempMap",A);var le=[],me=[];me.push("time");var Q=g()($),re;try{for(Q.s();!(re=Q.n()).done;){var Re=re.value;me.push(Re)}}catch(n){Q.e(n)}finally{Q.f()}le.push(me);var oe=g()(i),Se;try{for(oe.s();!(Se=oe.n()).done;){var de=Se.value,ue=[];ue.push(de);var ve=g()($),ye;try{for(ve.s();!(ye=ve.n()).done;){var ge=ye.value;A.has(de)&&A.get(de).has(ge)?ue.push(A.get(de).get(ge)):ue.push("")}}catch(n){ve.e(n)}finally{ve.f()}le.push(ue)}}catch(n){oe.e(n)}finally{oe.f()}var O=u.P6.aoa_to_sheet(le),f=u.P6.book_new();u.P6.book_append_sheet(f,O,"Sheet1");var L="";k=="daily"?L="(\u6BCF\u65E5)":k=="monthly"&&(L="(\u6BCF\u6708)");var U="".concat(B()().format("YYYYMMDDHHmmss")).concat(h.replaceAll(" ","")).concat(L,".xlsx");u.NC(f,U)}function x(S){var j=parseFloat(S);return j.toLocaleString("en-US")}function ie(S,j){return S?S.length<=2*j?S:S.slice(0,j)+"***"+S.slice(-j):""}},20067:function(){}}]);
