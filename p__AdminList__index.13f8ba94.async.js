"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[362],{5966:function(oe,J,r){var Q=r(97685),d=r(1413),X=r(91),S=r(21770),re=r(53025),B=r(55241),x=r(97435),ae=r(67294),Y=r(59348),g=r(85893),se=["fieldProps","proFieldProps"],C=["fieldProps","proFieldProps"],E="text",k=function(u){var o=u.fieldProps,T=u.proFieldProps,M=(0,X.Z)(u,se);return(0,g.jsx)(Y.Z,(0,d.Z)({valueType:E,fieldProps:o,filedConfig:{valueType:E},proFieldProps:T},M))},Z=function(u){var o=(0,S.Z)(u.open||!1,{value:u.open,onChange:u.onOpenChange}),T=(0,Q.Z)(o,2),M=T[0],b=T[1];return(0,g.jsx)(re.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(y){var j,I=y.getFieldValue(u.name||[]);return(0,g.jsx)(B.Z,(0,d.Z)((0,d.Z)({getPopupContainer:function(v){return v&&v.parentNode?v.parentNode:v},onOpenChange:function(v){return b(v)},content:(0,g.jsxs)("div",{style:{padding:"4px 0"},children:[(j=u.statusRender)===null||j===void 0?void 0:j.call(u,I),u.strengthText?(0,g.jsx)("div",{style:{marginTop:10},children:(0,g.jsx)("span",{children:u.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},u.popoverProps),{},{open:M,children:u.children}))}})},q=function(u){var o=u.fieldProps,T=u.proFieldProps,M=(0,X.Z)(u,C),b=(0,ae.useState)(!1),K=(0,Q.Z)(b,2),y=K[0],j=K[1];return o!=null&&o.statusRender&&M.name?(0,g.jsx)(Z,{name:M.name,statusRender:o==null?void 0:o.statusRender,popoverProps:o==null?void 0:o.popoverProps,strengthText:o==null?void 0:o.strengthText,open:y,onOpenChange:j,children:(0,g.jsx)("div",{children:(0,g.jsx)(Y.Z,(0,d.Z)({valueType:"password",fieldProps:(0,d.Z)((0,d.Z)({},(0,x.Z)(o,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(A){var v;o==null||(v=o.onBlur)===null||v===void 0||v.call(o,A),j(!1)},onClick:function(A){var v;o==null||(v=o.onClick)===null||v===void 0||v.call(o,A),j(!0)}}),proFieldProps:T,filedConfig:{valueType:E}},M))})}):(0,g.jsx)(Y.Z,(0,d.Z)({valueType:"password",fieldProps:o,proFieldProps:T,filedConfig:{valueType:E}},M))},R=k;R.Password=q,R.displayName="ProFormComponent",J.Z=R},72583:function(oe,J,r){r.r(J),r.d(J,{default:function(){return pe}});var Q=r(15009),d=r.n(Q),X=r(99289),S=r.n(X),re=r(5574),B=r.n(re),x=r(75456),ae=r(51042),Y=r(90930),g=r(38521),se=r(37476),C=r(1413),E=r(91),k=r(22270),Z=r(67294),q=r(66758),R=r(59348),n=r(85893),u=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],o=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],T=function(c,O){var H=c.fieldProps,z=c.children,N=c.params,D=c.proFieldProps,V=c.mode,w=c.valueEnum,G=c.request,$=c.showSearch,_=c.options,ee=(0,E.Z)(c,u),F=(0,Z.useContext)(q.Z);return(0,n.jsx)(R.Z,(0,C.Z)((0,C.Z)({valueEnum:(0,k.h)(w),request:G,params:N,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,C.Z)({options:_,mode:V,showSearch:$,getPopupContainer:F.getPopupContainer},H),ref:O,proFieldProps:D},ee),{},{children:z}))},M=Z.forwardRef(function(P,c){var O=P.fieldProps,H=P.children,z=P.params,N=P.proFieldProps,D=P.mode,V=P.valueEnum,w=P.request,G=P.options,$=(0,E.Z)(P,o),_=(0,C.Z)({options:G,mode:D||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},O),ee=(0,Z.useContext)(q.Z);return(0,n.jsx)(R.Z,(0,C.Z)((0,C.Z)({valueEnum:(0,k.h)(V),request:w,params:z,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,C.Z)({getPopupContainer:ee.getPopupContainer},_),ref:c,proFieldProps:N},$),{},{children:H}))}),b=Z.forwardRef(T),K=M,y=b;y.SearchSelect=K,y.displayName="ProFormComponent";var j=y,I=r(5966),A=r(94272),v=r(28248),h=r(2453),ie=r(7134),U=r(83622),le=r(86738),de=r(27484),te=r.n(de),ue=function(){var c=v.Z.useModal(),O=B()(c,2),H=O[0],z=O[1],N=(0,Z.useState)(!1),D=B()(N,2),V=D[0],w=D[1],G=(0,Z.useState)(),$=B()(G,2),_=$[0],ee=$[1],F=(0,Z.useRef)(),a=(0,A.useIntl)(),ne=function(){var m=S()(d()().mark(function i(s,l){var t,f;return d()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,p.next=3,(0,x.editStatus)(s,l);case 3:if(f=p.sent,f.code===0){p.next=9;break}if(f.code!=-2){p.next=8;break}return h.ZP.error(f.msg),p.abrupt("return",!1);case 8:throw f.msg;case 9:return h.ZP.success(a.formatMessage({id:"pages.vipList.update.success"})),(t=F.current)===null||t===void 0||t.reload(),p.abrupt("return",!0);case 14:return p.prev=14,p.t0=p.catch(0),h.ZP.error(a.formatMessage({id:"pages.vipList.update.error"})),p.abrupt("return",!1);case 18:case"end":return p.stop()}},i,null,[[0,14]])}));return function(s,l){return m.apply(this,arguments)}}(),me=function(){var m=S()(d()().mark(function i(s){var l,t;return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,x.deleteAdmin)(s);case 3:if(t=e.sent,t.code===0){e.next=9;break}if(t.code!=-2){e.next=8;break}return h.ZP.error(t.msg),e.abrupt("return",!1);case 8:throw t.msg;case 9:return h.ZP.success(a.formatMessage({id:"pages.vipList.update.success"})),(l=F.current)===null||l===void 0||l.reload(),e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),h.ZP.error(a.formatMessage({id:"pages.vipList.update.error"})),e.abrupt("return",!1);case 18:case"end":return e.stop()}},i,null,[[0,14]])}));return function(s){return m.apply(this,arguments)}}(),ve=function(){var m=S()(d()().mark(function i(s){var l,t;return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,x.resetPassword)(s);case 3:if(t=e.sent,t.code===0){e.next=9;break}if(t.code!=-2){e.next=8;break}return h.ZP.error(t.msg),e.abrupt("return",!1);case 8:throw t.msg;case 9:return H.success({title:a.formatMessage({id:"pages.AdminList.resetPassword.success"}),content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{children:a.formatMessage({id:"pages.AdminList.resetPassword.new"})+t.data}),(0,n.jsx)("div",{children:a.formatMessage({id:"pages.AdminList.resetPassword.tips"})})]})}),(l=F.current)===null||l===void 0||l.reload(),e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),h.ZP.error(a.formatMessage({id:"pages.vipList.update.error"})),e.abrupt("return",!1);case 18:case"end":return e.stop()}},i,null,[[0,14]])}));return function(s){return m.apply(this,arguments)}}(),ce=function(){var m=S()(d()().mark(function i(s){var l,t;return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,x.addAdmin)(s.role,s.username,s.password);case 3:if(t=e.sent,t.code===0){e.next=9;break}if(t.code!=-2){e.next=8;break}return h.ZP.error(t.msg),e.abrupt("return",!1);case 8:throw t.msg;case 9:return h.ZP.success(a.formatMessage({id:"pages.vipList.update.success"})),(l=F.current)===null||l===void 0||l.reload(),e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),h.ZP.error(a.formatMessage({id:"pages.vipList.update.error"})),e.abrupt("return",!1);case 18:case"end":return e.stop()}},i,null,[[0,14]])}));return function(s){return m.apply(this,arguments)}}(),fe=[{title:"ID",dataIndex:"id",formItemProps:{normalize:function(i){return i==null?void 0:i.trim()}}},{title:a.formatMessage({id:"createTime"}),dataIndex:"createTime",hideInSearch:!0,render:function(i,s){return(0,n.jsx)(n.Fragment,{children:te()(s.createTime).format("YYYY-MM-DD HH:mm:ss")})}},{title:a.formatMessage({id:"updateTime"}),dataIndex:"updateTime",hideInSearch:!0,render:function(i,s){return(0,n.jsx)(n.Fragment,{children:te()(s.updateTime).format("YYYY-MM-DD HH:mm:ss")})}},{title:a.formatMessage({id:"status"}),dataIndex:"status",valueEnum:{normal:{text:a.formatMessage({id:"normal"}),color:"green"},disabled:{text:a.formatMessage({id:"disabled"}),color:"red"}}},{title:a.formatMessage({id:"role"}),dataIndex:"role",valueEnum:{operational:{text:a.formatMessage({id:"operational"})},development:{text:a.formatMessage({id:"development"})},superAdmin:{text:a.formatMessage({id:"superAdmin"})}}},{title:a.formatMessage({id:"username"}),dataIndex:"username",formItemProps:{normalize:function(i){return i==null?void 0:i.trim()}}},{title:a.formatMessage({id:"avatar"}),dataIndex:"avatar",hideInSearch:!0,render:function(i,s){return(0,n.jsx)(ie.C,{size:"small",src:(0,n.jsx)("img",{src:s.avatar,alt:"avatar"})})}},{title:a.formatMessage({id:"lastLoginTime"}),dataIndex:"lastLoginTs",hideInSearch:!0,render:function(i,s){return(0,n.jsx)(n.Fragment,{children:te().unix(s.lastLoginTs).format("YYYY-MM-DD HH:mm:ss")})}},{title:a.formatMessage({id:"pages.vipList.options"}),dataIndex:"option",valueType:"option",hideInDescriptions:!0,render:function(i,s){var l=[];return s.status=="normal"?l.push((0,n.jsx)(U.ZP,{type:"link",onClick:function(){ne(s.id,"disabled")},children:a.formatMessage({id:"disable"})})):l.push((0,n.jsx)(U.ZP,{type:"link",onClick:function(){ne(s.id,"normal")},children:a.formatMessage({id:"enable"})})),l.push((0,n.jsx)(U.ZP,{type:"link",onClick:function(){ve(s.id)},children:a.formatMessage({id:"resetPassword"})})),s.username!=="ave_dev"&&l.push((0,n.jsx)(le.Z,{title:a.formatMessage({id:"pages.deleteAdmin"}),description:a.formatMessage({id:"pages.deleteAdmin.comfirm"},{username:s.username}),onConfirm:S()(d()().mark(function t(){return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me(s.id);case 2:case"end":return e.stop()}},t)})),children:(0,n.jsxs)(U.ZP,{style:{marginRight:10},type:"link",children:[a.formatMessage({id:"delete"})," "]})})),l}}];return(0,n.jsxs)(Y._z,{children:[(0,n.jsx)(g.Z,{actionRef:F,toolBarRender:function(){return[(0,n.jsxs)(U.ZP,{type:"primary",onClick:function(){w(!0)},children:[(0,n.jsx)(ae.Z,{}),a.formatMessage({id:"new"})]},"primary")]},rowKey:"id",search:{labelWidth:120},request:function(){var m=S()(d()().mark(function i(s,l){var t,f,e,p,L;return d()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return console.log(l),s.page=s==null?void 0:s.current,delete s.current,W.next=5,(0,x.getAdminList)(s,l);case 5:return L=W.sent,console.log({data:(t=L.data)===null||t===void 0?void 0:t.list,success:L.code==0,total:(f=L.data)===null||f===void 0?void 0:f.total}),W.abrupt("return",{data:(e=L.data)===null||e===void 0?void 0:e.list,success:L.code==0,total:(p=L.data)===null||p===void 0?void 0:p.total});case 8:case"end":return W.stop()}},i)}));return function(i,s){return m.apply(this,arguments)}}(),columns:fe}),(0,n.jsxs)(se.Y,{title:a.formatMessage({id:"pages.AdminList.newAdmin"}),open:V,onFinish:ce,onOpenChange:w,children:[(0,n.jsx)(j,{name:"role",label:a.formatMessage({id:"role"}),valueEnum:{operational:a.formatMessage({id:"operational"}),development:a.formatMessage({id:"development"}),superAdmin:a.formatMessage({id:"superAdmin"})},rules:[{required:!0,message:"Please select role!"}]}),(0,n.jsx)(I.Z,{name:"username",fieldProps:{maxLength:24},label:a.formatMessage({id:"username"}),rules:[{required:!0,message:"Please enter username!"},{min:5,message:"length min 5"}]}),(0,n.jsx)(I.Z.Password,{name:"password",fieldProps:{maxLength:24},label:a.formatMessage({id:"password"}),rules:[{required:!0,message:"Please enter new password!"},{min:6,message:a.formatMessage({id:"pages.Accout.Setting.password.description"})}]})]}),z]})},pe=ue}}]);
