"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[362],{5966:function(de,Q,s){var X=s(97685),d=s(1413),q=s(91),M=s(21770),se=s(53025),w=s(55241),T=s(97435),te=s(67294),U=s(59348),h=s(85893),_=["fieldProps","proFieldProps"],S=["fieldProps","proFieldProps"],R="text",ee=function(p){var l=p.fieldProps,E=p.proFieldProps,C=(0,q.Z)(p,_);return(0,h.jsx)(U.Z,(0,d.Z)({valueType:R,fieldProps:l,filedConfig:{valueType:R},proFieldProps:E},C))},Z=function(p){var l=(0,M.Z)(p.open||!1,{value:p.open,onChange:p.onOpenChange}),E=(0,X.Z)(l,2),C=E[0],H=E[1];return(0,h.jsx)(se.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(y){var j,A=y.getFieldValue(p.name||[]);return(0,h.jsx)(w.Z,(0,d.Z)((0,d.Z)({getPopupContainer:function(v){return v&&v.parentNode?v.parentNode:v},onOpenChange:function(v){return H(v)},content:(0,h.jsxs)("div",{style:{padding:"4px 0"},children:[(j=p.statusRender)===null||j===void 0?void 0:j.call(p,A),p.strengthText?(0,h.jsx)("div",{style:{marginTop:10},children:(0,h.jsx)("span",{children:p.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},p.popoverProps),{},{open:C,children:p.children}))}})},re=function(p){var l=p.fieldProps,E=p.proFieldProps,C=(0,q.Z)(p,S),H=(0,te.useState)(!1),z=(0,X.Z)(H,2),y=z[0],j=z[1];return l!=null&&l.statusRender&&C.name?(0,h.jsx)(Z,{name:C.name,statusRender:l==null?void 0:l.statusRender,popoverProps:l==null?void 0:l.popoverProps,strengthText:l==null?void 0:l.strengthText,open:y,onOpenChange:j,children:(0,h.jsx)("div",{children:(0,h.jsx)(U.Z,(0,d.Z)({valueType:"password",fieldProps:(0,d.Z)((0,d.Z)({},(0,T.Z)(l,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(F){var v;l==null||(v=l.onBlur)===null||v===void 0||v.call(l,F),j(!1)},onClick:function(F){var v;l==null||(v=l.onClick)===null||v===void 0||v.call(l,F),j(!0)}}),proFieldProps:E,filedConfig:{valueType:R}},C))})}):(0,h.jsx)(U.Z,(0,d.Z)({valueType:"password",fieldProps:l,proFieldProps:E,filedConfig:{valueType:R}},C))},I=ee;I.Password=re,I.displayName="ProFormComponent",Q.Z=I},72583:function(de,Q,s){s.r(Q),s.d(Q,{default:function(){return ce}});var X=s(15009),d=s.n(X),q=s(99289),M=s.n(q),se=s(5574),w=s.n(se),T=s(75456),te=s(51042),U=s(90930),h=s(38521),_=s(37476),S=s(1413),R=s(91),ee=s(22270),Z=s(67294),re=s(66758),I=s(59348),n=s(85893),p=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],l=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],E=function(g,D){var k=g.fieldProps,N=g.children,V=g.params,$=g.proFieldProps,G=g.mode,b=g.valueEnum,J=g.request,W=g.showSearch,B=g.options,Y=(0,R.Z)(g,p),ie=(0,Z.useContext)(re.Z);return(0,n.jsx)(I.Z,(0,S.Z)((0,S.Z)({valueEnum:(0,ee.h)(b),request:J,params:V,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,S.Z)({options:B,mode:G,showSearch:W,getPopupContainer:ie.getPopupContainer},k),ref:D,proFieldProps:$},Y),{},{children:N}))},C=Z.forwardRef(function(P,g){var D=P.fieldProps,k=P.children,N=P.params,V=P.proFieldProps,$=P.mode,G=P.valueEnum,b=P.request,J=P.options,W=(0,R.Z)(P,l),B=(0,S.Z)({options:J,mode:$||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},D),Y=(0,Z.useContext)(re.Z);return(0,n.jsx)(I.Z,(0,S.Z)((0,S.Z)({valueEnum:(0,ee.h)(G),request:b,params:N,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,S.Z)({getPopupContainer:Y.getPopupContainer},B),ref:g,proFieldProps:V},W),{},{children:k}))}),H=Z.forwardRef(E),z=C,y=H;y.SearchSelect=z,y.displayName="ProFormComponent";var j=y,A=s(5966),F=s(94272),v=s(28248),c=s(2453),ue=s(7134),x=s(83622),pe=s(86738),me=s(27484),ne=s.n(me),ve=function(){var g=v.Z.useModal(),D=w()(g,2),k=D[0],N=D[1],V=(0,Z.useState)(!1),$=w()(V,2),G=$[0],b=$[1],J=(0,Z.useState)(!1),W=w()(J,2),B=W[0],Y=W[1],ie=(0,Z.useState)(),oe=w()(ie,2),ae=oe[0],fe=oe[1],L=(0,Z.useRef)(),r=(0,F.useIntl)(),le=function(){var u=M()(d()().mark(function i(a,o){var t,f;return d()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.prev=0,m.next=3,(0,T.editStatus)(a,o);case 3:if(f=m.sent,f.code===0){m.next=9;break}if(f.code!=-2){m.next=8;break}return c.ZP.error(f.msg),m.abrupt("return",!1);case 8:throw f.msg;case 9:return c.ZP.success(r.formatMessage({id:"pages.vipList.update.success"})),(t=L.current)===null||t===void 0||t.reload(),m.abrupt("return",!0);case 14:return m.prev=14,m.t0=m.catch(0),c.ZP.error(r.formatMessage({id:"pages.vipList.update.error"})),m.abrupt("return",!1);case 18:case"end":return m.stop()}},i,null,[[0,14]])}));return function(a,o){return u.apply(this,arguments)}}(),ge=function(){var u=M()(d()().mark(function i(a){var o,t;return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,T.deleteAdmin)(a);case 3:if(t=e.sent,t.code===0){e.next=9;break}if(t.code!=-2){e.next=8;break}return c.ZP.error(t.msg),e.abrupt("return",!1);case 8:throw t.msg;case 9:return c.ZP.success(r.formatMessage({id:"pages.vipList.update.success"})),(o=L.current)===null||o===void 0||o.reload(),e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),c.ZP.error(r.formatMessage({id:"pages.vipList.update.error"})),e.abrupt("return",!1);case 18:case"end":return e.stop()}},i,null,[[0,14]])}));return function(a){return u.apply(this,arguments)}}(),he=function(){var u=M()(d()().mark(function i(a){var o,t;return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,T.resetPassword)(a);case 3:if(t=e.sent,t.code===0){e.next=9;break}if(t.code!=-2){e.next=8;break}return c.ZP.error(t.msg),e.abrupt("return",!1);case 8:throw t.msg;case 9:return k.success({title:r.formatMessage({id:"pages.AdminList.resetPassword.success"}),content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{children:r.formatMessage({id:"pages.AdminList.resetPassword.new"})+t.data}),(0,n.jsx)("div",{children:r.formatMessage({id:"pages.AdminList.resetPassword.tips"})})]})}),(o=L.current)===null||o===void 0||o.reload(),e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),c.ZP.error(r.formatMessage({id:"pages.vipList.update.error"})),e.abrupt("return",!1);case 18:case"end":return e.stop()}},i,null,[[0,14]])}));return function(a){return u.apply(this,arguments)}}(),Pe=function(){var u=M()(d()().mark(function i(a){var o,t;return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,T.addAdmin)(a.role,a.username,a.password);case 3:if(t=e.sent,t.code===0){e.next=9;break}if(t.code!=-2){e.next=8;break}return c.ZP.error(t.msg),e.abrupt("return",!1);case 8:throw t.msg;case 9:return c.ZP.success(r.formatMessage({id:"pages.vipList.update.success"})),(o=L.current)===null||o===void 0||o.reload(),e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),c.ZP.error(r.formatMessage({id:"pages.vipList.update.error"})),e.abrupt("return",!1);case 18:case"end":return e.stop()}},i,null,[[0,14]])}));return function(a){return u.apply(this,arguments)}}(),Ze=function(){var u=M()(d()().mark(function i(a){var o,t;return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,T.editRole)(a.uid,a.role);case 3:if(t=e.sent,t.code===0){e.next=9;break}if(t.code!=-2){e.next=8;break}return c.ZP.error(t.msg),e.abrupt("return",!1);case 8:throw t.msg;case 9:return c.ZP.success(r.formatMessage({id:"pages.vipList.update.success"})),(o=L.current)===null||o===void 0||o.reload(),e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),c.ZP.error(r.formatMessage({id:"pages.vipList.update.error"})),e.abrupt("return",!1);case 18:case"end":return e.stop()}},i,null,[[0,14]])}));return function(a){return u.apply(this,arguments)}}(),Me=[{title:"ID",dataIndex:"id",formItemProps:{normalize:function(i){return i==null?void 0:i.trim()}}},{title:r.formatMessage({id:"createTime"}),dataIndex:"createTime",hideInSearch:!0,render:function(i,a){return(0,n.jsx)(n.Fragment,{children:ne()(a.createTime).format("YYYY-MM-DD HH:mm:ss")})}},{title:r.formatMessage({id:"updateTime"}),dataIndex:"updateTime",hideInSearch:!0,render:function(i,a){return(0,n.jsx)(n.Fragment,{children:ne()(a.updateTime).format("YYYY-MM-DD HH:mm:ss")})}},{title:r.formatMessage({id:"status"}),dataIndex:"status",valueEnum:{normal:{text:r.formatMessage({id:"normal"}),color:"green"},disabled:{text:r.formatMessage({id:"disabled"}),color:"red"}}},{title:r.formatMessage({id:"role"}),dataIndex:"role",valueEnum:{operational:{text:r.formatMessage({id:"operational"})},development:{text:r.formatMessage({id:"development"})},superAdmin:{text:r.formatMessage({id:"superAdmin"})}}},{title:r.formatMessage({id:"username"}),dataIndex:"username",formItemProps:{normalize:function(i){return i==null?void 0:i.trim()}}},{title:r.formatMessage({id:"avatar"}),dataIndex:"avatar",hideInSearch:!0,render:function(i,a){return(0,n.jsx)(ue.C,{size:"small",src:(0,n.jsx)("img",{src:a.avatar,alt:"avatar"})})}},{title:r.formatMessage({id:"lastLoginTime"}),dataIndex:"lastLoginTs",hideInSearch:!0,render:function(i,a){return(0,n.jsx)(n.Fragment,{children:ne().unix(a.lastLoginTs).format("YYYY-MM-DD HH:mm:ss")})}},{title:r.formatMessage({id:"pages.vipList.options"}),dataIndex:"option",valueType:"option",hideInDescriptions:!0,render:function(i,a){var o=[];return a.status=="normal"?o.push((0,n.jsx)(x.ZP,{type:"link",onClick:function(){le(a.id,"disabled")},children:r.formatMessage({id:"disable"})})):o.push((0,n.jsx)(x.ZP,{type:"link",onClick:function(){le(a.id,"normal")},children:r.formatMessage({id:"enable"})})),o.push((0,n.jsx)(x.ZP,{type:"link",onClick:function(){he(a.id)},children:r.formatMessage({id:"resetPassword"})})),a.username!=="ave_dev"&&o.push((0,n.jsx)(pe.Z,{title:r.formatMessage({id:"pages.deleteAdmin"}),description:r.formatMessage({id:"pages.deleteAdmin.comfirm"},{username:a.username}),onConfirm:M()(d()().mark(function t(){return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge(a.id);case 2:case"end":return e.stop()}},t)})),children:(0,n.jsxs)(x.ZP,{style:{marginRight:10},type:"link",children:[r.formatMessage({id:"delete"})," "]})}),(0,n.jsx)(x.ZP,{type:"link",onClick:function(){fe(a),Y(!0)},children:r.formatMessage({id:"editRole"})})),o}}];return(0,n.jsxs)(U._z,{children:[(0,n.jsx)(h.Z,{actionRef:L,toolBarRender:function(){return[(0,n.jsxs)(x.ZP,{type:"primary",onClick:function(){b(!0)},children:[(0,n.jsx)(te.Z,{}),r.formatMessage({id:"new"})]},"primary")]},rowKey:"id",search:{labelWidth:120},request:function(){var u=M()(d()().mark(function i(a,o){var t,f,e,m,O;return d()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return console.log(o),a.page=a==null?void 0:a.current,delete a.current,K.next=5,(0,T.getAdminList)(a,o);case 5:return O=K.sent,console.log({data:(t=O.data)===null||t===void 0?void 0:t.list,success:O.code==0,total:(f=O.data)===null||f===void 0?void 0:f.total}),K.abrupt("return",{data:(e=O.data)===null||e===void 0?void 0:e.list,success:O.code==0,total:(m=O.data)===null||m===void 0?void 0:m.total});case 8:case"end":return K.stop()}},i)}));return function(i,a){return u.apply(this,arguments)}}(),columns:Me}),(0,n.jsxs)(_.Y,{title:r.formatMessage({id:"pages.AdminList.newAdmin"}),open:G,onFinish:Pe,onOpenChange:b,children:[(0,n.jsx)(j,{name:"role",label:r.formatMessage({id:"role"}),valueEnum:{operational:r.formatMessage({id:"operational"}),development:r.formatMessage({id:"development"}),superAdmin:r.formatMessage({id:"superAdmin"})},rules:[{required:!0,message:"Please select role!"}]}),(0,n.jsx)(A.Z,{name:"username",fieldProps:{maxLength:24},label:r.formatMessage({id:"username"}),rules:[{required:!0,message:"Please enter username!"},{min:5,message:"length min 5"}]}),(0,n.jsx)(A.Z.Password,{name:"password",fieldProps:{maxLength:24},label:r.formatMessage({id:"password"}),rules:[{required:!0,message:"Please enter new password!"},{min:6,message:r.formatMessage({id:"pages.Accout.Setting.password.description"})}]})]}),ae&&B&&(0,n.jsxs)(_.Y,{title:r.formatMessage({id:"editRole"}),open:B,onFinish:function(){var u=M()(d()().mark(function i(a){var o,t;return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,T.editRole)(ae.id,a.role);case 3:return t=e.sent,c.ZP.success(r.formatMessage({id:"pages.vipList.update.success"})),(o=L.current)===null||o===void 0||o.reload(),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(0),c.ZP.error(r.formatMessage({id:"pages.vipList.update.error"})),e.abrupt("return",!1);case 13:case"end":return e.stop()}},i,null,[[0,9]])}));return function(i){return u.apply(this,arguments)}}(),onOpenChange:Y,children:[(0,n.jsx)(A.Z,{name:"id",label:"id",disabled:!0,initialValue:ae.id}),(0,n.jsx)(j,{name:"role",label:r.formatMessage({id:"role"}),valueEnum:{operational:r.formatMessage({id:"operational"}),development:r.formatMessage({id:"development"}),superAdmin:r.formatMessage({id:"superAdmin"})},rules:[{required:!0,message:"Please select role!"}],initialValue:ae.role})]}),N]})},ce=ve}}]);
