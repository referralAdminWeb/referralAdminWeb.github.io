"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[241],{57660:function(D,V,a){a.r(V),a.d(V,{default:function(){return ae}});var O=a(15009),o=a.n(O),z=a(99289),v=a.n(z),U=a(5574),K=a.n(U),S=a(58143),E=a(65763),x=a(90930),M=a(38521),b=a(94272),$=a(58073),w=a(86738),y=a(2453),A=a(83622),j=a(67294),H=a(6742),C=a(34994),J=a(37476),Y=a(26915),Q=a(26412),W=a(37804),X=a(72269),q=a(52720),r=a(85893),_=function(T){var B=T.visible,L=T.onVisibleChange,k=T.onFinish,h=T.currentUser,R=(0,j.useRef)(),G=(0,j.useState)(void 0),N=K()(G,2),c=N[0],f=N[1],Z=(0,b.useIntl)(),I=(0,j.useState)([]),t=K()(I,2),l=t[0],m=t[1],u=function(){var P=v()(o()().mark(function g(s){var d,F;return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(d="",n.prev=1,!h){n.next=8;break}return d=h.guid,n.next=6,S.Z.thirdParty.update(d,s.orgName,s.tradingFeeRate,s.commissionRate,s.icon,s.isPublic);case 6:n.next=13;break;case 8:if(c){n.next=10;break}return n.abrupt("return");case 10:return d=c.guid,n.next=13,S.Z.thirdParty.add(d,s.orgName,s.tradingFeeRate,s.commissionRate,s.icon,s.isPublic);case 13:y.ZP.success("success"),L(!1),k(),(F=R.current)===null||F===void 0||F.resetFields(),f(void 0),n.next=25;break;case 20:return n.prev=20,n.t0=n.catch(1),console.error(n.t0),y.ZP.error("error: "+String(n.t0)),n.abrupt("return",!1);case 25:case"end":return n.stop()}},g,null,[[1,20]])}));return function(s){return P.apply(this,arguments)}}(),i=function(){var P=v()(o()().mark(function g(s){var d,F;return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,s.target.value){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,(0,H.getUserByRef)(s.target.value);case 5:d=n.sent,d!==void 0&&(F={guid:d.guid,tgUsername:d.tgUsername,email:d.email,vip:d.vip,remark:d.remark},y.ZP.success("User Found"),f(F)),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),f(void 0),y.ZP.error(Z.formatMessage({id:"pages.overall.user.notFound"}));case 13:case"end":return n.stop()}},g,null,[[0,9]])}));return function(s){return P.apply(this,arguments)}}();(0,j.useEffect)(function(){m(c?[{key:"1",label:"Guid",children:c.guid},{key:"2",label:"Tg Username",children:c.tgUsername},{key:"3",label:"Email",children:c.email},{key:"4",label:"Vip Level",children:c.vip},{key:"5",label:"Remark",span:2,children:c.remark}]:[])},[c]);var e=function(){if(!h)return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.A.Item,{name:"refCode",label:Z.formatMessage({id:"pages.overall.newSvip.refCode"}),rules:[{required:!0,message:"Please enter refCode!"}],children:(0,r.jsx)(Y.Z,{onBlur:i,placeholder:Z.formatMessage({id:"pages.overall.newSvip.refCode.placeholder"}),max:16})}),c&&(0,r.jsx)(Q.Z,{size:"small",title:"User Info",layout:"vertical",items:l})]})};return(0,j.useEffect)(function(){if(h){var P;(P=R.current)===null||P===void 0||P.setFieldsValue({orgName:h.orgName,tradingFeeRate:h.tradingFeeRate/100,commissionRate:h.commissionRate/100,icon:h.icon,isPublic:h.isPublic})}}),(0,r.jsxs)(J.Y,{open:B,onOpenChange:function(g){if(!g){var s;R==null||(s=R.current)===null||s===void 0||s.resetFields(),f(void 0),L(g)}},clearOnDestroy:!0,onFinish:u,formRef:R,children:[e(),(0,r.jsx)(C.A.Item,{name:"orgName",label:Z.formatMessage({id:"pages.thirdParty.orgName"}),rules:[{required:!0,message:"Please enter Organization Name!"}],children:(0,r.jsx)(Y.Z,{max:24})}),(0,r.jsx)(C.A.Item,{name:"tradingFeeRate",label:Z.formatMessage({id:"pages.thirdParty.tradingFeeRate"}),rules:[{required:!0,message:"Please enter Trading Fee Rate!"}],initialValue:2,children:(0,r.jsx)(W.Z,{size:"large",addonAfter:"%",precision:2,min:0,max:2})}),(0,r.jsx)(C.A.Item,{name:"commissionRate",label:Z.formatMessage({id:"pages.thirdParty.commissionRate"}),rules:[{required:!0,message:"Please enter Commission Rate!"}],initialValue:30,children:(0,r.jsx)(W.Z,{size:"large",addonAfter:"%",precision:2,min:0,max:60})}),(0,r.jsx)(C.A.Item,{name:"icon",label:Z.formatMessage({id:"icon"}),rules:[{required:!0,message:"Please upload icon!"}],children:(0,r.jsx)(q.Ur,{uploadFinish:function(g){var s;(s=R.current)===null||s===void 0||s.setFieldsValue({icon:g})},url:h==null?void 0:h.icon})}),(0,r.jsx)(C.A.Item,{name:"isPublic",label:Z.formatMessage({id:"pages.thirdParty.isPublic"}),initialValue:!0,children:(0,r.jsx)(X.Z,{})})]})},ee=_,re=function(){var T=(0,j.useState)(void 0),B=K()(T,2),L=B[0],k=B[1],h=(0,j.useState)(!1),R=K()(h,2),G=R[0],N=R[1],c=(0,j.useRef)(),f=(0,b.useIntl)(),Z=[{title:f.formatMessage({id:"icon"}),dataIndex:"icon",hideInSearch:!0,render:function(t,l){return(0,r.jsx)($.Z,{src:l.icon,width:32,height:32})}},{title:f.formatMessage({id:"name"}),dataIndex:"orgName",hideInSearch:!0},{title:"Guid",dataIndex:"guid"},{title:"Email",dataIndex:"email",hideInSearch:!0},{title:f.formatMessage({id:"status"}),dataIndex:"status",hideInSearch:!0,valueEnum:{enabled:{text:"Enabled",color:"green"},disabled:{text:"Disabled",color:"red"}}},{title:f.formatMessage({id:"pages.thirdParty.userNums"}),dataIndex:"userNums",hideInSearch:!0},{title:f.formatMessage({id:"pages.thirdParty.volumes"}),dataIndex:"volumes",hideInSearch:!0,renderText:function(t){return"$"+(0,E.B)(t,3)}},{title:f.formatMessage({id:"pages.thirdParty.txns"}),dataIndex:"txns",hideInSearch:!0},{title:f.formatMessage({id:"pages.thirdParty.feeRate"}),dataIndex:"tradingFeeRate",hideInSearch:!0,renderText:function(t){return t/100+"%"}},{title:f.formatMessage({id:"pages.thirdParty.commissionRate"}),dataIndex:"commissionRate",hideInSearch:!0,renderText:function(t){return t/100+"%"}},{title:f.formatMessage({id:"pages.thirdParty.channelCommission"}),dataIndex:"channelCommission",hideInSearch:!0,renderText:function(t){return"$"+(0,E.B)(t,3)}},{title:"API Key",dataIndex:"apiKey",hideInSearch:!0},{title:f.formatMessage({id:"options"}),hideInSearch:!0,render:function(t,l){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w.Z,{title:"Reset API Key",description:"Are you sure to Reset API Key?",onConfirm:v()(o()().mark(function m(){var u;return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.Z.thirdParty.resetApiKey(l.guid);case 3:y.ZP.success("Reset API Key success"),(u=c.current)===null||u===void 0||u.reload(),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),y.ZP.error("Reset API Key error:"+String(e.t0)),e.abrupt("return",!1);case 12:case"end":return e.stop()}},m,null,[[0,7]])})),okText:"Yes",cancelText:"No",children:(0,r.jsx)(A.ZP,{type:"link",children:"Reset API Key"})}),(0,r.jsx)(w.Z,{title:"Send API Key",description:"Are you sure to Send API Key to ".concat(l.email,"?"),onConfirm:v()(o()().mark(function m(){return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,S.Z.thirdParty.sendApiKey(l.guid);case 3:y.ZP.success("Send API Key success"),i.next=11;break;case 6:return i.prev=6,i.t0=i.catch(0),console.error(i.t0),y.ZP.error("Send API Key error:"+String(i.t0)),i.abrupt("return",!1);case 11:case"end":return i.stop()}},m,null,[[0,6]])})),okText:"Yes",cancelText:"No",children:(0,r.jsx)(A.ZP,{type:"link",children:"Send API Key"})}),(0,r.jsx)(A.ZP,{type:"link",onClick:function(){k(l),N(!0)},children:"Edit"}),l.status=="enabled"?(0,r.jsx)(A.ZP,{type:"link",onClick:v()(o()().mark(function m(){var u;return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.Z.thirdParty.editStatus(l.guid,"disabled");case 3:y.ZP.success("Edit status success"),(u=c.current)===null||u===void 0||u.reload(),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),y.ZP.error("Edit status error:"+String(e.t0)),e.abrupt("return",!1);case 12:case"end":return e.stop()}},m,null,[[0,7]])})),children:"Disabled"}):(0,r.jsx)(A.ZP,{type:"link",onClick:v()(o()().mark(function m(){var u;return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.Z.thirdParty.editStatus(l.guid,"enabled");case 3:y.ZP.success("Edit status success"),(u=c.current)===null||u===void 0||u.reload(),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),y.ZP.error("Edit status error:"+String(e.t0)),e.abrupt("return",!1);case 12:case"end":return e.stop()}},m,null,[[0,7]])})),children:"Enabled"})]})}}];return(0,r.jsxs)(x._z,{children:[(0,r.jsx)(M.Z,{actionRef:c,rowKey:"guid",search:{labelWidth:120},columns:Z,toolBarRender:function(){return[(0,r.jsx)("div",{children:(0,r.jsx)(A.ZP,{type:"link",onClick:function(){k(void 0),N(!0)},children:f.formatMessage({id:"pages.thirdParty.addApiThirdParty"})})})]},request:function(){var I=v()(o()().mark(function t(l,m){var u,i,e,P,g,s,d;return o()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:e=!1,P="",p.t0=o()().keys(m);case 3:if((p.t1=p.t0()).done){p.next=11;break}return g=p.t1.value,P=g,s=m[g],(s==null?void 0:s.toString())=="descend"&&(e=!0),p.abrupt("break",11);case 11:return l.page=l==null?void 0:l.current,delete l.current,p.next=15,S.Z.thirdParty.getPageList(l);case 15:return d=p.sent,p.abrupt("return",{data:(u=d.data)===null||u===void 0?void 0:u.list,success:d.code==0,total:(i=d.data)===null||i===void 0?void 0:i.total});case 17:case"end":return p.stop()}},t)}));return function(t,l){return I.apply(this,arguments)}}(),scroll:{x:!0}}),(0,r.jsx)(ee,{visible:G,onVisibleChange:function(t){N(t),t||k(void 0)},onFinish:function(){var t;(t=c.current)===null||t===void 0||t.reload(),k(void 0)},currentUser:L})]})},ae=re},65763:function(D,V,a){a.d(V,{B:function(){return o},q:function(){return z}});var O=a(90482);function o(v,U){if(!v)return"";var K=new O.Z(v),S=v.split(".");if(S.length!==2)return v;for(var E=S[0],x=S[1],M=0,b="",$=0;$<x.length;$++){var w=x[$];if(b.length>=U)break;w=="0"&&b.length==0?M=M+1:b=b+w}return M>3?E+".0{"+M+"}"+b:E+"."+"0".repeat(M)+b}function z(v){var U=parseFloat(v);return U.toLocaleString("en-US")}}}]);
