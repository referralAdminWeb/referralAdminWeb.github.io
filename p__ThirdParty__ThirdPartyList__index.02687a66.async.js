(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[241],{57660:function(ne,G,r){"use strict";r.r(G),r.d(G,{default:function(){return z}});var X=r(15009),l=r.n(X),q=r(99289),A=r.n(q),_=r(5574),C=r.n(_),E=r(92861),H=r(65763),ee=r(90930),j=r(38521),F=r(94272),J=r(58073),T=r(86738),v=r(2453),Z=r(83622),d=r(67294),R=r(6742),p=r(34994),x=r(37476),V=r(26915),U=r(26412),B=r(37804),Q=r(72269),W=r(52720),a=r(85893),re=function(k){var $=k.visible,K=k.onVisibleChange,N=k.onFinish,o=k.currentUser,P=(0,d.useRef)(),O=(0,d.useState)(void 0),L=C()(O,2),c=L[0],f=L[1],b=(0,F.useIntl)(),g=(0,d.useState)([]),i=C()(g,2),s=i[0],y=i[1],h=function(){var M=A()(l()().mark(function I(t){var m,w;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(m="",n.prev=1,!o){n.next=8;break}return m=o.guid,n.next=6,E.Z.thirdParty.update(m,t.orgName,t.tradingFeeRate,t.commissionRate,t.icon,t.isPublic);case 6:n.next=13;break;case 8:if(c){n.next=10;break}return n.abrupt("return");case 10:return m=c.guid,n.next=13,E.Z.thirdParty.add(m,t.orgName,t.tradingFeeRate,t.commissionRate,t.icon,t.isPublic);case 13:v.ZP.success("success"),K(!1),N(),(w=P.current)===null||w===void 0||w.resetFields(),f(void 0),n.next=25;break;case 20:return n.prev=20,n.t0=n.catch(1),console.error(n.t0),v.ZP.error("error: "+String(n.t0)),n.abrupt("return",!1);case 25:case"end":return n.stop()}},I,null,[[1,20]])}));return function(t){return M.apply(this,arguments)}}(),u=function(){var M=A()(l()().mark(function I(t){var m,w;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,t.target.value){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,(0,R.getUserByRef)(t.target.value);case 5:m=n.sent,m!==void 0&&(w={guid:m.guid,tgUsername:m.tgUsername,email:m.email,vip:m.vip,remark:m.remark},v.ZP.success("User Found"),f(w)),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),f(void 0),v.ZP.error(b.formatMessage({id:"pages.overall.user.notFound"}));case 13:case"end":return n.stop()}},I,null,[[0,9]])}));return function(t){return M.apply(this,arguments)}}();(0,d.useEffect)(function(){y(c?[{key:"1",label:"Guid",children:c.guid},{key:"2",label:"Tg Username",children:c.tgUsername},{key:"3",label:"Email",children:c.email},{key:"4",label:"Vip Level",children:c.vip},{key:"5",label:"Remark",span:2,children:c.remark}]:[])},[c]);var e=function(){if(!o)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.A.Item,{name:"refCode",label:b.formatMessage({id:"pages.overall.newSvip.refCode"}),rules:[{required:!0,message:"Please enter refCode!"}],children:(0,a.jsx)(V.Z,{onBlur:u,placeholder:b.formatMessage({id:"pages.overall.newSvip.refCode.placeholder"}),max:16})}),c&&(0,a.jsx)(U.Z,{size:"small",title:"User Info",layout:"vertical",items:s})]})};return(0,d.useEffect)(function(){if(o){var M;(M=P.current)===null||M===void 0||M.setFieldsValue({orgName:o.orgName,tradingFeeRate:o.tradingFeeRate/100,commissionRate:o.commissionRate/100,icon:o.icon,isPublic:o.isPublic})}}),(0,a.jsxs)(x.Y,{open:$,onOpenChange:function(I){if(!I){var t;P==null||(t=P.current)===null||t===void 0||t.resetFields(),f(void 0),K(I)}},clearOnDestroy:!0,onFinish:h,formRef:P,children:[e(),(0,a.jsx)(p.A.Item,{name:"orgName",label:b.formatMessage({id:"pages.thirdParty.orgName"}),rules:[{required:!0,message:"Please enter Organization Name!"}],children:(0,a.jsx)(V.Z,{max:24})}),(0,a.jsx)(p.A.Item,{name:"tradingFeeRate",label:b.formatMessage({id:"pages.thirdParty.tradingFeeRate"}),rules:[{required:!0,message:"Please enter Trading Fee Rate!"}],initialValue:2,children:(0,a.jsx)(B.Z,{size:"large",addonAfter:"%",precision:2,min:0,max:2})}),(0,a.jsx)(p.A.Item,{name:"commissionRate",label:b.formatMessage({id:"pages.thirdParty.commissionRate"}),rules:[{required:!0,message:"Please enter Commission Rate!"}],initialValue:30,children:(0,a.jsx)(B.Z,{size:"large",addonAfter:"%",precision:2,min:0,max:60})}),(0,a.jsx)(p.A.Item,{name:"icon",label:b.formatMessage({id:"icon"}),rules:[{required:!0,message:"Please upload icon!"}],children:(0,a.jsx)(W.Ur,{uploadFinish:function(I){var t;(t=P.current)===null||t===void 0||t.setFieldsValue({icon:I})},url:o==null?void 0:o.icon})}),(0,a.jsx)(p.A.Item,{name:"isPublic",label:b.formatMessage({id:"pages.thirdParty.isPublic"}),initialValue:!0,children:(0,a.jsx)(Q.Z,{})})]})},ae=re,Y=function(){var k=(0,d.useState)(void 0),$=C()(k,2),K=$[0],N=$[1],o=(0,d.useState)(!1),P=C()(o,2),O=P[0],L=P[1],c=(0,d.useRef)(),f=(0,F.useIntl)(),b=[{title:f.formatMessage({id:"icon"}),dataIndex:"icon",hideInSearch:!0,render:function(i,s){return(0,a.jsx)(J.Z,{src:s.icon,width:32,height:32})}},{title:f.formatMessage({id:"name"}),dataIndex:"orgName",hideInSearch:!0},{title:"Guid",dataIndex:"guid"},{title:"Email",dataIndex:"email",hideInSearch:!0},{title:f.formatMessage({id:"status"}),dataIndex:"status",hideInSearch:!0,valueEnum:{enabled:{text:"Enabled",color:"green"},disabled:{text:"Disabled",color:"red"}}},{title:f.formatMessage({id:"pages.thirdParty.userNums"}),dataIndex:"userNums",hideInSearch:!0},{title:f.formatMessage({id:"pages.thirdParty.volumes"}),dataIndex:"volumes",hideInSearch:!0,renderText:function(i){return"$"+(0,H.BW)(i,3)}},{title:f.formatMessage({id:"pages.thirdParty.txns"}),dataIndex:"txns",hideInSearch:!0},{title:f.formatMessage({id:"pages.thirdParty.feeRate"}),dataIndex:"tradingFeeRate",hideInSearch:!0,renderText:function(i){return i/100+"%"}},{title:f.formatMessage({id:"pages.thirdParty.commissionRate"}),dataIndex:"commissionRate",hideInSearch:!0,renderText:function(i){return i/100+"%"}},{title:f.formatMessage({id:"pages.thirdParty.channelCommission"}),dataIndex:"channelCommission",hideInSearch:!0,renderText:function(i){return"$"+(0,H.BW)(i,3)}},{title:"API Key",dataIndex:"apiKey",hideInSearch:!0},{title:f.formatMessage({id:"options"}),hideInSearch:!0,render:function(i,s){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.Z,{title:"Reset API Key",description:"Are you sure to Reset API Key?",onConfirm:A()(l()().mark(function y(){var h;return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.Z.thirdParty.resetApiKey(s.guid);case 3:v.ZP.success("Reset API Key success"),(h=c.current)===null||h===void 0||h.reload(),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),v.ZP.error("Reset API Key error:"+String(e.t0)),e.abrupt("return",!1);case 12:case"end":return e.stop()}},y,null,[[0,7]])})),okText:"Yes",cancelText:"No",children:(0,a.jsx)(Z.ZP,{type:"link",children:"Reset API Key"})}),(0,a.jsx)(T.Z,{title:"Send API Key",description:"Are you sure to Send API Key to ".concat(s.email,"?"),onConfirm:A()(l()().mark(function y(){return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,E.Z.thirdParty.sendApiKey(s.guid);case 3:v.ZP.success("Send API Key success"),u.next=11;break;case 6:return u.prev=6,u.t0=u.catch(0),console.error(u.t0),v.ZP.error("Send API Key error:"+String(u.t0)),u.abrupt("return",!1);case 11:case"end":return u.stop()}},y,null,[[0,6]])})),okText:"Yes",cancelText:"No",children:(0,a.jsx)(Z.ZP,{type:"link",children:"Send API Key"})}),(0,a.jsx)(Z.ZP,{type:"link",onClick:function(){N(s),L(!0)},children:"Edit"}),s.status=="enabled"?(0,a.jsx)(Z.ZP,{type:"link",onClick:A()(l()().mark(function y(){var h;return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.Z.thirdParty.editStatus(s.guid,"disabled");case 3:v.ZP.success("Edit status success"),(h=c.current)===null||h===void 0||h.reload(),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),v.ZP.error("Edit status error:"+String(e.t0)),e.abrupt("return",!1);case 12:case"end":return e.stop()}},y,null,[[0,7]])})),children:"Disabled"}):(0,a.jsx)(Z.ZP,{type:"link",onClick:A()(l()().mark(function y(){var h;return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.Z.thirdParty.editStatus(s.guid,"enabled");case 3:v.ZP.success("Edit status success"),(h=c.current)===null||h===void 0||h.reload(),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),v.ZP.error("Edit status error:"+String(e.t0)),e.abrupt("return",!1);case 12:case"end":return e.stop()}},y,null,[[0,7]])})),children:"Enabled"})]})}}];return(0,a.jsxs)(ee._z,{children:[(0,a.jsx)(j.Z,{actionRef:c,rowKey:"guid",search:{labelWidth:120},columns:b,toolBarRender:function(){return[(0,a.jsx)("div",{children:(0,a.jsx)(Z.ZP,{type:"link",onClick:function(){N(void 0),L(!0)},children:f.formatMessage({id:"pages.thirdParty.addApiThirdParty"})})})]},request:function(){var g=A()(l()().mark(function i(s,y){var h,u,e,M,I,t,m;return l()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:e=!1,M="",S.t0=l()().keys(y);case 3:if((S.t1=S.t0()).done){S.next=11;break}return I=S.t1.value,M=I,t=y[I],(t==null?void 0:t.toString())=="descend"&&(e=!0),S.abrupt("break",11);case 11:return s.page=s==null?void 0:s.current,delete s.current,S.next=15,E.Z.thirdParty.getPageList(s);case 15:return m=S.sent,S.abrupt("return",{data:(h=m.data)===null||h===void 0?void 0:h.list,success:m.code==0,total:(u=m.data)===null||u===void 0?void 0:u.total});case 17:case"end":return S.stop()}},i)}));return function(i,s){return g.apply(this,arguments)}}(),scroll:{x:!0}}),(0,a.jsx)(ae,{visible:O,onVisibleChange:function(i){L(i),i||N(void 0)},onFinish:function(){var i;(i=c.current)===null||i===void 0||i.reload(),N(void 0)},currentUser:K})]})},z=Y},65763:function(ne,G,r){"use strict";r.d(G,{BW:function(){return E},q0:function(){return ee},rD:function(){return H}});var X=r(64599),l=r.n(X),q=r(27484),A=r.n(q),_=r(90482),C=r(84105);function E(j,F){if(!j)return"";var J=new _.Z(j),T=j.split(".");if(T.length!==2)return j;for(var v=T[0],Z=T[1],d=0,R="",p=0;p<Z.length;p++){var x=Z[p];if(R.length>=F)break;x=="0"&&R.length==0?d=d+1:R=R+x}return d>3?v+".0{"+d+"}"+R:v+"."+"0".repeat(d)+R}function H(j,F,J,T,v,Z){var d=new Set,R=new Set,p=l()(T),x;try{for(p.s();!(x=p.n()).done;){var V=x.value;d.add(V[j]),R.add(V[F])}}catch(s){p.e(s)}finally{p.f()}console.log("mainKeyList",d),console.log("timeKeyList",R);var U=new Map,B=l()(T),Q;try{for(B.s();!(Q=B.n()).done;){var W=Q.value,a=W[F],re=W[j],ae=W[J];U.has(a)||U.set(a,new Map),U.get(a).set(re,ae)}}catch(s){B.e(s)}finally{B.f()}console.log("tempMap",U);var Y=[],z=[];z.push("time");var D=l()(d),k;try{for(D.s();!(k=D.n()).done;){var $=k.value;z.push($)}}catch(s){D.e(s)}finally{D.f()}Y.push(z);var K=l()(R),N;try{for(K.s();!(N=K.n()).done;){var o=N.value,P=[];P.push(o);var O=l()(d),L;try{for(O.s();!(L=O.n()).done;){var c=L.value;U.has(o)&&U.get(o).has(c)?P.push(U.get(o).get(c)):P.push("")}}catch(s){O.e(s)}finally{O.f()}Y.push(P)}}catch(s){K.e(s)}finally{K.f()}var f=C.P6.aoa_to_sheet(Y),b=C.P6.book_new();C.P6.book_append_sheet(b,f,"Sheet1");var g="";v=="daily"?g="(\u6BCF\u65E5)":v=="monthly"&&(g="(\u6BCF\u6708)");var i="".concat(A()().format("YYYYMMDDHHmmss")).concat(Z.replaceAll(" ","")).concat(g,".xlsx");C.NC(b,i)}function ee(j){var F=parseFloat(j);return F.toLocaleString("en-US")}},20067:function(){}}]);
