"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[463],{5966:function(x,f,a){var A=a(97685),d=a(1413),T=a(91),j=a(21770),R=a(53025),U=a(55241),Z=a(97435),B=a(67294),p=a(67550),o=a(85893),m=["fieldProps","proFieldProps"],c=["fieldProps","proFieldProps"],v="text",I=function(e){var s=e.fieldProps,u=e.proFieldProps,i=(0,T.Z)(e,m);return(0,o.jsx)(p.Z,(0,d.Z)({valueType:v,fieldProps:s,filedConfig:{valueType:v},proFieldProps:u},i))},t=function(e){var s=(0,j.Z)(e.open||!1,{value:e.open,onChange:e.onOpenChange}),u=(0,A.Z)(s,2),i=u[0],E=u[1];return(0,o.jsx)(R.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(h){var _,O=h.getFieldValue(e.name||[]);return(0,o.jsx)(U.Z,(0,d.Z)((0,d.Z)({getPopupContainer:function(n){return n&&n.parentNode?n.parentNode:n},onOpenChange:function(n){return E(n)},content:(0,o.jsxs)("div",{style:{padding:"4px 0"},children:[(_=e.statusRender)===null||_===void 0?void 0:_.call(e,O),e.strengthText?(0,o.jsx)("div",{style:{marginTop:10},children:(0,o.jsx)("span",{children:e.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},e.popoverProps),{},{open:i,children:e.children}))}})},W=function(e){var s=e.fieldProps,u=e.proFieldProps,i=(0,T.Z)(e,c),E=(0,B.useState)(!1),S=(0,A.Z)(E,2),h=S[0],_=S[1];return s!=null&&s.statusRender&&i.name?(0,o.jsx)(t,{name:i.name,statusRender:s==null?void 0:s.statusRender,popoverProps:s==null?void 0:s.popoverProps,strengthText:s==null?void 0:s.strengthText,open:h,onOpenChange:_,children:(0,o.jsx)("div",{children:(0,o.jsx)(p.Z,(0,d.Z)({valueType:"password",fieldProps:(0,d.Z)((0,d.Z)({},(0,Z.Z)(s,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(P){var n;s==null||(n=s.onBlur)===null||n===void 0||n.call(s,P),_(!1)},onClick:function(P){var n;s==null||(n=s.onClick)===null||n===void 0||n.call(s,P),_(!0)}}),proFieldProps:u,filedConfig:{valueType:v}},i))})}):(0,o.jsx)(p.Z,(0,d.Z)({valueType:"password",fieldProps:s,proFieldProps:u,filedConfig:{valueType:v}},i))},M=I;M.Password=W,M.displayName="ProFormComponent",f.Z=M},46596:function(x,f,a){a.r(f),a.d(f,{AvatarName:function(){return W}});var A=a(15009),d=a.n(A),T=a(99289),j=a.n(T),R=a(5574),U=a.n(R),Z=a(70343),B=a(37476),p=a(5966),o=a(94272),m=a(2453),c=a(2487),v=a(83622),I=a(67294),t=a(85893),W=function(){var e=(0,o.useModel)("@@initialState"),s=e.initialState,u=s||{},i=u.userInfo;return i==null?void 0:i.username},M=function(){var e=(0,o.useIntl)(),s=(0,o.useModel)("@@initialState"),u=s.initialState,i=s.loading,E=s.refresh,S=s.setInitialState,h=(0,I.useState)(!1),_=U()(h,2),O=_[0],P=_[1],n=(0,I.useState)(!1),b=U()(n,2),y=b[0],K=b[1],w=function(){var C=j()(d()().mark(function D(g){var l;return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,Z.editUsername)(g.username);case 3:if(l=r.sent,l.code===0){r.next=9;break}if(l.code!=-2){r.next=8;break}return m.ZP.error(l.msg),r.abrupt("return",!1);case 8:throw l.msg;case 9:return E(),m.ZP.success(e.formatMessage({id:"pages.vipList.update.success"})),r.abrupt("return",!0);case 14:return r.prev=14,r.t0=r.catch(0),m.ZP.error(e.formatMessage({id:"pages.vipList.update.error"})),r.abrupt("return",!1);case 18:case"end":return r.stop()}},D,null,[[0,14]])}));return function(g){return C.apply(this,arguments)}}(),F=function(){var C=j()(d()().mark(function D(g){var l;return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(g.password==g.passwordAgain){r.next=3;break}return m.ZP.error(e.formatMessage({id:"enteredPasswordsDiffer"})),r.abrupt("return",!1);case 3:return r.prev=3,r.next=6,(0,Z.editPassword)(g.oldPassword,g.password);case 6:if(l=r.sent,l.code===0){r.next=12;break}if(l.code!=-2){r.next=11;break}return m.ZP.error(l.msg),r.abrupt("return",!1);case 11:throw l.msg;case 12:return m.ZP.success(e.formatMessage({id:"pages.vipList.update.success"})),r.abrupt("return",!0);case 16:return r.prev=16,r.t0=r.catch(3),m.ZP.error(e.formatMessage({id:"pages.vipList.update.error"})),r.abrupt("return",!1);case 20:case"end":return r.stop()}},D,null,[[3,16]])}));return function(g){return C.apply(this,arguments)}}();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(c.Z,{itemLayout:"horizontal",children:[(0,t.jsx)(c.Z.Item,{actions:[(0,t.jsx)(v.ZP,{type:"link",onClick:function(){P(!0)},children:e.formatMessage({id:"edit"})})],children:(0,t.jsx)(c.Z.Item.Meta,{title:e.formatMessage({id:"username"}),description:e.formatMessage({id:"pages.Accout.Setting.currentUsername"})+": "+W()})}),(0,t.jsx)(c.Z.Item,{actions:[(0,t.jsx)(v.ZP,{type:"link",onClick:function(){K(!0)},children:e.formatMessage({id:"edit"})})],children:(0,t.jsx)(c.Z.Item.Meta,{title:e.formatMessage({id:"password"}),description:e.formatMessage({id:"pages.Accout.Setting.password.description"})})})]}),(0,t.jsx)(B.Y,{title:e.formatMessage({id:"editUsername"}),open:O,onFinish:w,onOpenChange:P,children:(0,t.jsx)(p.Z,{name:"username",fieldProps:{maxLength:24},rules:[{required:!0,message:"Please enter username!"},{min:5,message:"length min 5"}]})}),(0,t.jsxs)(B.Y,{title:e.formatMessage({id:"editPassword"}),open:y,onFinish:F,onOpenChange:K,children:[(0,t.jsx)(p.Z.Password,{name:"oldPassword",fieldProps:{maxLength:24},label:e.formatMessage({id:"pages.Accout.Setting.oldPassword"}),rules:[{required:!0,message:"Please enter new password!"},{min:6,message:e.formatMessage({id:"pages.Accout.Setting.password.description"})}]}),(0,t.jsx)(p.Z.Password,{name:"password",fieldProps:{maxLength:24},label:e.formatMessage({id:"pages.Accout.Setting.newPassword"}),rules:[{required:!0,message:"Please enter new password!"},{min:6,message:e.formatMessage({id:"pages.Accout.Setting.password.description"})}]}),(0,t.jsx)(p.Z.Password,{name:"passwordAgain",fieldProps:{maxLength:24},label:e.formatMessage({id:"pages.Accout.Setting.reEnter"}),rules:[{required:!0,message:"Please enter new password!"},{min:6,message:e.formatMessage({id:"pages.Accout.Setting.password.description"})}]})]})]})};f.default=M}}]);
