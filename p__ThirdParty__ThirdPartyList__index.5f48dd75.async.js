(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[241],{57660:function(ne,W,r){"use strict";r.r(W),r.d(W,{default:function(){return re}});var J=r(15009),l=r.n(J),Q=r(99289),A=r.n(Q),X=r(5574),C=r.n(X),E=r(58143),w=r(65763),q=r(90930),S=r(38521),T=r(94272),L=r(58073),U=r(86738),u=r(2453),I=r(83622),d=r(67294),M=r(6742),b=r(34994),F=r(37476),D=r(26915),_=r(26412),$=r(37804),N=r(72269),Y=r(52720),a=r(85893),ee=function(O){var G=O.visible,H=O.onVisibleChange,x=O.onFinish,m=O.currentUser,j=(0,d.useRef)(),ae=(0,d.useState)(void 0),B=C()(ae,2),v=B[0],h=B[1],Z=(0,T.useIntl)(),R=(0,d.useState)([]),t=C()(R,2),o=t[0],g=t[1],c=function(){var y=A()(l()().mark(function p(s){var f,K;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(f="",n.prev=1,!m){n.next=8;break}return f=m.guid,n.next=6,E.Z.thirdParty.update(f,s.orgName,s.tradingFeeRate,s.commissionRate,s.icon,s.isPublic);case 6:n.next=13;break;case 8:if(v){n.next=10;break}return n.abrupt("return");case 10:return f=v.guid,n.next=13,E.Z.thirdParty.add(f,s.orgName,s.tradingFeeRate,s.commissionRate,s.icon,s.isPublic);case 13:u.ZP.success("success"),H(!1),x(),(K=j.current)===null||K===void 0||K.resetFields(),h(void 0),n.next=25;break;case 20:return n.prev=20,n.t0=n.catch(1),console.error(n.t0),u.ZP.error("error: "+String(n.t0)),n.abrupt("return",!1);case 25:case"end":return n.stop()}},p,null,[[1,20]])}));return function(s){return y.apply(this,arguments)}}(),i=function(){var y=A()(l()().mark(function p(s){var f,K;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,s.target.value){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,(0,M.getUserByRef)(s.target.value);case 5:f=n.sent,f!==void 0&&(K={guid:f.guid,tgUsername:f.tgUsername,email:f.email,vip:f.vip,remark:f.remark},u.ZP.success("User Found"),h(K)),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),h(void 0),u.ZP.error(Z.formatMessage({id:"pages.overall.user.notFound"}));case 13:case"end":return n.stop()}},p,null,[[0,9]])}));return function(s){return y.apply(this,arguments)}}();(0,d.useEffect)(function(){g(v?[{key:"1",label:"Guid",children:v.guid},{key:"2",label:"Tg Username",children:v.tgUsername},{key:"3",label:"Email",children:v.email},{key:"4",label:"Vip Level",children:v.vip},{key:"5",label:"Remark",span:2,children:v.remark}]:[])},[v]);var e=function(){if(!m)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.A.Item,{name:"refCode",label:Z.formatMessage({id:"pages.overall.newSvip.refCode"}),rules:[{required:!0,message:"Please enter refCode!"}],children:(0,a.jsx)(D.Z,{onBlur:i,placeholder:Z.formatMessage({id:"pages.overall.newSvip.refCode.placeholder"}),max:16})}),v&&(0,a.jsx)(_.Z,{size:"small",title:"User Info",layout:"vertical",items:o})]})};return(0,d.useEffect)(function(){if(m){var y;(y=j.current)===null||y===void 0||y.setFieldsValue({orgName:m.orgName,tradingFeeRate:m.tradingFeeRate/100,commissionRate:m.commissionRate/100,icon:m.icon,isPublic:m.isPublic})}}),(0,a.jsxs)(F.Y,{open:G,onOpenChange:function(p){if(!p){var s;j==null||(s=j.current)===null||s===void 0||s.resetFields(),h(void 0),H(p)}},clearOnDestroy:!0,onFinish:c,formRef:j,children:[e(),(0,a.jsx)(b.A.Item,{name:"orgName",label:Z.formatMessage({id:"pages.thirdParty.orgName"}),rules:[{required:!0,message:"Please enter Organization Name!"}],children:(0,a.jsx)(D.Z,{max:24})}),(0,a.jsx)(b.A.Item,{name:"tradingFeeRate",label:Z.formatMessage({id:"pages.thirdParty.tradingFeeRate"}),rules:[{required:!0,message:"Please enter Trading Fee Rate!"}],initialValue:2,children:(0,a.jsx)($.Z,{size:"large",addonAfter:"%",precision:2,min:0,max:2})}),(0,a.jsx)(b.A.Item,{name:"commissionRate",label:Z.formatMessage({id:"pages.thirdParty.commissionRate"}),rules:[{required:!0,message:"Please enter Commission Rate!"}],initialValue:30,children:(0,a.jsx)($.Z,{size:"large",addonAfter:"%",precision:2,min:0,max:60})}),(0,a.jsx)(b.A.Item,{name:"icon",label:Z.formatMessage({id:"icon"}),rules:[{required:!0,message:"Please upload icon!"}],children:(0,a.jsx)(Y.Ur,{uploadFinish:function(p){var s;(s=j.current)===null||s===void 0||s.setFieldsValue({icon:p})},url:m==null?void 0:m.icon})}),(0,a.jsx)(b.A.Item,{name:"isPublic",label:Z.formatMessage({id:"pages.thirdParty.isPublic"}),initialValue:!0,children:(0,a.jsx)(N.Z,{})})]})},z=ee,V=function(){var O=(0,d.useState)(void 0),G=C()(O,2),H=G[0],x=G[1],m=(0,d.useState)(!1),j=C()(m,2),ae=j[0],B=j[1],v=(0,d.useRef)(),h=(0,T.useIntl)(),Z=[{title:h.formatMessage({id:"icon"}),dataIndex:"icon",hideInSearch:!0,render:function(t,o){return(0,a.jsx)(L.Z,{src:o.icon,width:32,height:32})}},{title:h.formatMessage({id:"name"}),dataIndex:"orgName",hideInSearch:!0},{title:"Guid",dataIndex:"guid"},{title:"Email",dataIndex:"email",hideInSearch:!0},{title:h.formatMessage({id:"status"}),dataIndex:"status",hideInSearch:!0,valueEnum:{enabled:{text:"Enabled",color:"green"},disabled:{text:"Disabled",color:"red"}}},{title:h.formatMessage({id:"pages.thirdParty.userNums"}),dataIndex:"userNums",hideInSearch:!0},{title:h.formatMessage({id:"pages.thirdParty.volumes"}),dataIndex:"volumes",hideInSearch:!0,renderText:function(t){return"$"+(0,w.BW)(t,3)}},{title:h.formatMessage({id:"pages.thirdParty.txns"}),dataIndex:"txns",hideInSearch:!0},{title:h.formatMessage({id:"pages.thirdParty.feeRate"}),dataIndex:"tradingFeeRate",hideInSearch:!0,renderText:function(t){return t/100+"%"}},{title:h.formatMessage({id:"pages.thirdParty.commissionRate"}),dataIndex:"commissionRate",hideInSearch:!0,renderText:function(t){return t/100+"%"}},{title:h.formatMessage({id:"pages.thirdParty.channelCommission"}),dataIndex:"channelCommission",hideInSearch:!0,renderText:function(t){return"$"+(0,w.BW)(t,3)}},{title:"API Key",dataIndex:"apiKey",hideInSearch:!0},{title:h.formatMessage({id:"options"}),hideInSearch:!0,render:function(t,o){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U.Z,{title:"Reset API Key",description:"Are you sure to Reset API Key?",onConfirm:A()(l()().mark(function g(){var c;return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.Z.thirdParty.resetApiKey(o.guid);case 3:u.ZP.success("Reset API Key success"),(c=v.current)===null||c===void 0||c.reload(),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),u.ZP.error("Reset API Key error:"+String(e.t0)),e.abrupt("return",!1);case 12:case"end":return e.stop()}},g,null,[[0,7]])})),okText:"Yes",cancelText:"No",children:(0,a.jsx)(I.ZP,{type:"link",children:"Reset API Key"})}),(0,a.jsx)(U.Z,{title:"Send API Key",description:"Are you sure to Send API Key to ".concat(o.email,"?"),onConfirm:A()(l()().mark(function g(){return l()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,E.Z.thirdParty.sendApiKey(o.guid);case 3:u.ZP.success("Send API Key success"),i.next=11;break;case 6:return i.prev=6,i.t0=i.catch(0),console.error(i.t0),u.ZP.error("Send API Key error:"+String(i.t0)),i.abrupt("return",!1);case 11:case"end":return i.stop()}},g,null,[[0,6]])})),okText:"Yes",cancelText:"No",children:(0,a.jsx)(I.ZP,{type:"link",children:"Send API Key"})}),(0,a.jsx)(I.ZP,{type:"link",onClick:function(){x(o),B(!0)},children:"Edit"}),o.status=="enabled"?(0,a.jsx)(I.ZP,{type:"link",onClick:A()(l()().mark(function g(){var c;return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.Z.thirdParty.editStatus(o.guid,"disabled");case 3:u.ZP.success("Edit status success"),(c=v.current)===null||c===void 0||c.reload(),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),u.ZP.error("Edit status error:"+String(e.t0)),e.abrupt("return",!1);case 12:case"end":return e.stop()}},g,null,[[0,7]])})),children:"Disabled"}):(0,a.jsx)(I.ZP,{type:"link",onClick:A()(l()().mark(function g(){var c;return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.Z.thirdParty.editStatus(o.guid,"enabled");case 3:u.ZP.success("Edit status success"),(c=v.current)===null||c===void 0||c.reload(),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),u.ZP.error("Edit status error:"+String(e.t0)),e.abrupt("return",!1);case 12:case"end":return e.stop()}},g,null,[[0,7]])})),children:"Enabled"})]})}}];return(0,a.jsxs)(q._z,{children:[(0,a.jsx)(S.Z,{actionRef:v,rowKey:"guid",search:{labelWidth:120},columns:Z,toolBarRender:function(){return[(0,a.jsx)("div",{children:(0,a.jsx)(I.ZP,{type:"link",onClick:function(){x(void 0),B(!0)},children:h.formatMessage({id:"pages.thirdParty.addApiThirdParty"})})})]},request:function(){var R=A()(l()().mark(function t(o,g){var c,i,e,y,p,s,f;return l()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:e=!1,y="",P.t0=l()().keys(g);case 3:if((P.t1=P.t0()).done){P.next=11;break}return p=P.t1.value,y=p,s=g[p],(s==null?void 0:s.toString())=="descend"&&(e=!0),P.abrupt("break",11);case 11:return o.page=o==null?void 0:o.current,delete o.current,P.next=15,E.Z.thirdParty.getPageList(o);case 15:return f=P.sent,P.abrupt("return",{data:(c=f.data)===null||c===void 0?void 0:c.list,success:f.code==0,total:(i=f.data)===null||i===void 0?void 0:i.total});case 17:case"end":return P.stop()}},t)}));return function(t,o){return R.apply(this,arguments)}}(),scroll:{x:!0}}),(0,a.jsx)(z,{visible:ae,onVisibleChange:function(t){B(t),t||x(void 0)},onFinish:function(){var t;(t=v.current)===null||t===void 0||t.reload(),x(void 0)},currentUser:H})]})},re=V},65763:function(ne,W,r){"use strict";r.d(W,{BW:function(){return E},q0:function(){return q},rD:function(){return w}});var J=r(64599),l=r.n(J),Q=r(27484),A=r.n(Q),X=r(90482),C=r(84105);function E(S,T){if(!S)return"";var L=new X.Z(S),U=S.split(".");if(U.length!==2)return S;for(var u=U[0],I=U[1],d=0,M="",b=0;b<I.length;b++){var F=I[b];if(M.length>=T)break;F=="0"&&M.length==0?d=d+1:M=M+F}return d>3?u+".0{"+d+"}"+M:u+"."+"0".repeat(d)+M}function w(S,T,L,U){var u=[],I=[],d=l()(S),M;try{for(d.s();!(M=d.n()).done;){var b=M.value;I.push(b.value)}}catch(k){d.e(k)}finally{d.f()}u.push(I);var F=l()(T),D;try{for(F.s();!(D=F.n()).done;){var _=D.value,$=[],N=l()(S),Y;try{for(N.s();!(Y=N.n()).done;){var a=Y.value;$.push(_[a.key])}}catch(k){N.e(k)}finally{N.f()}u.push($)}}catch(k){F.e(k)}finally{F.f()}var ee=C.P6.aoa_to_sheet(u),z=C.P6.book_new();C.P6.book_append_sheet(z,ee,"Sheet1");var V="";L=="daily"?V="(\u6BCF\u65E5)":L=="monthly"&&(V="(\u6BCF\u6708)");var re="".concat(A()().format("YYYYMMDDHHmmss")).concat(U.replaceAll(" ","")).concat(V,".xlsx");C.NC(z,re)}function q(S){var T=parseFloat(S);return T.toLocaleString("en-US")}},20067:function(){}}]);
