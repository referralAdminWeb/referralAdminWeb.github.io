"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[463],{5966:function(ee,L,r){var T=r(97685),f=r(1413),E=r(91),b=r(21770),Y=r(53025),F=r(55241),$=r(97435),w=r(67294),R=r(56297),P=r(85893),A=["fieldProps","proFieldProps"],i=["fieldProps","proFieldProps"],j="text",N=function(e){var n=e.fieldProps,h=e.proFieldProps,c=(0,E.Z)(e,A);return(0,P.jsx)(R.Z,(0,f.Z)({valueType:j,fieldProps:n,filedConfig:{valueType:j},proFieldProps:h},c))},o=function(e){var n=(0,b.Z)(e.open||!1,{value:e.open,onChange:e.onOpenChange}),h=(0,T.Z)(n,2),c=h[0],Z=h[1];return(0,P.jsx)(Y.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(s){var g,C=s.getFieldValue(e.name||[]);return(0,P.jsx)(F.Z,(0,f.Z)((0,f.Z)({getPopupContainer:function(v){return v&&v.parentNode?v.parentNode:v},onOpenChange:function(v){return Z(v)},content:(0,P.jsxs)("div",{style:{padding:"4px 0"},children:[(g=e.statusRender)===null||g===void 0?void 0:g.call(e,C),e.strengthText?(0,P.jsx)("div",{style:{marginTop:10},children:(0,P.jsx)("span",{children:e.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},e.popoverProps),{},{open:c,children:e.children}))}})},V=function(e){var n=e.fieldProps,h=e.proFieldProps,c=(0,E.Z)(e,i),Z=(0,w.useState)(!1),B=(0,T.Z)(Z,2),s=B[0],g=B[1];return n!=null&&n.statusRender&&c.name?(0,P.jsx)(o,{name:c.name,statusRender:n==null?void 0:n.statusRender,popoverProps:n==null?void 0:n.popoverProps,strengthText:n==null?void 0:n.strengthText,open:s,onOpenChange:g,children:(0,P.jsx)("div",{children:(0,P.jsx)(R.Z,(0,f.Z)({valueType:"password",fieldProps:(0,f.Z)((0,f.Z)({},(0,$.Z)(n,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(I){var v;n==null||(v=n.onBlur)===null||v===void 0||v.call(n,I),g(!1)},onClick:function(I){var v;n==null||(v=n.onClick)===null||v===void 0||v.call(n,I),g(!0)}}),proFieldProps:h,filedConfig:{valueType:j}},c))})}):(0,P.jsx)(R.Z,(0,f.Z)({valueType:"password",fieldProps:n,proFieldProps:h,filedConfig:{valueType:j}},c))},x=N;x.Password=V,x.displayName="ProFormComponent",L.Z=x},37476:function(ee,L,r){r.d(L,{Y:function(){return x}});var T=r(74165),f=r(15861),E=r(1413),b=r(97685),Y=r(91),F=r(73177),$=r(21532),w=r(28248),R=r(55917),P=r(21770),A=r(80334),i=r(67294),j=r(73935),N=r(78733),o=r(85893),V=["children","trigger","onVisibleChange","onOpenChange","modalProps","onFinish","submitTimeout","title","width","visible","open"];function x(p){var e,n,h=p.children,c=p.trigger,Z=p.onVisibleChange,B=p.onOpenChange,s=p.modalProps,g=p.onFinish,C=p.submitTimeout,I=p.title,v=p.width,S=p.visible,H=p.open,_=(0,Y.Z)(p,V);(0,A.ET)(!_.footer||!(s!=null&&s.footer),"ModalForm \u662F\u4E00\u4E2A ProForm \u7684\u7279\u6B8A\u5E03\u5C40\uFF0C\u5982\u679C\u60F3\u81EA\u5B9A\u4E49\u6309\u94AE\uFF0C\u8BF7\u4F7F\u7528 submit.render \u81EA\u5B9A\u4E49\u3002");var G=(0,i.useContext)($.ZP.ConfigContext),Q=(0,i.useState)([]),K=(0,b.Z)(Q,2),y=K[1],U=(0,i.useState)(!1),M=(0,b.Z)(U,2),k=M[0],t=M[1],se=(0,P.Z)(!!S,{value:H||S,onChange:B||Z}),re=(0,b.Z)(se,2),X=re[0],W=re[1],J=(0,i.useRef)(null),te=(0,i.useCallback)(function(u){J.current===null&&u&&y([]),J.current=u},[]),z=(0,i.useRef)(),ae=(0,i.useCallback)(function(){var u,a,l,m=(u=(a=_.form)!==null&&a!==void 0?a:(l=_.formRef)===null||l===void 0?void 0:l.current)!==null&&u!==void 0?u:z.current;m&&s!==null&&s!==void 0&&s.destroyOnClose&&m.resetFields()},[s==null?void 0:s.destroyOnClose,_.form,_.formRef]);(0,i.useImperativeHandle)(_.formRef,function(){return z.current},[z.current]),(0,i.useEffect)(function(){(H||S)&&(B==null||B(!0),Z==null||Z(!0))},[S,H]);var oe=(0,i.useMemo)(function(){return c?i.cloneElement(c,(0,E.Z)((0,E.Z)({key:"trigger"},c.props),{},{onClick:function(){var u=(0,f.Z)((0,T.Z)().mark(function l(m){var O,d;return(0,T.Z)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:W(!X),(O=c.props)===null||O===void 0||(d=O.onClick)===null||d===void 0||d.call(O,m);case 2:case"end":return D.stop()}},l)}));function a(l){return u.apply(this,arguments)}return a}()})):null},[W,c,X]),le=(0,i.useMemo)(function(){var u,a,l,m,O,d;return _.submitter===!1?!1:(0,R.Z)({searchConfig:{submitText:(u=(a=s==null?void 0:s.okText)!==null&&a!==void 0?a:(l=G.locale)===null||l===void 0||(l=l.Modal)===null||l===void 0?void 0:l.okText)!==null&&u!==void 0?u:"\u786E\u8BA4",resetText:(m=(O=s==null?void 0:s.cancelText)!==null&&O!==void 0?O:(d=G.locale)===null||d===void 0||(d=d.Modal)===null||d===void 0?void 0:d.cancelText)!==null&&m!==void 0?m:"\u53D6\u6D88"},resetButtonProps:{preventDefault:!0,disabled:C?k:void 0,onClick:function(D){var q;W(!1),s==null||(q=s.onCancel)===null||q===void 0||q.call(s,D)}}},_.submitter)},[(e=G.locale)===null||e===void 0||(e=e.Modal)===null||e===void 0?void 0:e.cancelText,(n=G.locale)===null||n===void 0||(n=n.Modal)===null||n===void 0?void 0:n.okText,s,_.submitter,W,k,C]),ie=(0,i.useCallback)(function(u,a){return(0,o.jsxs)(o.Fragment,{children:[u,J.current&&a?(0,o.jsx)(i.Fragment,{children:(0,j.createPortal)(a,J.current)},"submitter"):a]})},[]),ue=(0,i.useCallback)(function(){var u=(0,f.Z)((0,T.Z)().mark(function a(l){var m,O,d;return(0,T.Z)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return m=g==null?void 0:g(l),C&&m instanceof Promise&&(t(!0),O=setTimeout(function(){return t(!1)},C),m.finally(function(){clearTimeout(O),t(!1)})),D.next=4,m;case 4:return d=D.sent,d&&W(!1),D.abrupt("return",d);case 7:case"end":return D.stop()}},a)}));return function(a){return u.apply(this,arguments)}}(),[g,W,C]),de=(0,F.X)(X);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.Z,(0,E.Z)((0,E.Z)((0,E.Z)({title:I,width:v||800},s),de),{},{onCancel:function(a){var l;C&&k||(W(!1),s==null||(l=s.onCancel)===null||l===void 0||l.call(s,a))},afterClose:function(){var a;ae(),X&&W(!1),s==null||(a=s.afterClose)===null||a===void 0||a.call(s)},footer:_.submitter!==!1?(0,o.jsx)("div",{ref:te,style:{display:"flex",justifyContent:"flex-end"}}):null,children:(0,o.jsx)(N.I,(0,E.Z)((0,E.Z)({formComponentType:"ModalForm",layout:"vertical"},_),{},{onInit:function(a,l){var m;_.formRef&&(_.formRef.current=l),_==null||(m=_.onInit)===null||m===void 0||m.call(_,a,l),z.current=l},formRef:z,submitter:le,onFinish:function(){var u=(0,f.Z)((0,T.Z)().mark(function a(l){var m;return(0,T.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,ue(l);case 2:return m=d.sent,d.abrupt("return",m);case 4:case"end":return d.stop()}},a)}));return function(a){return u.apply(this,arguments)}}(),contentRender:ie,children:h}))})),oe]})}},46596:function(ee,L,r){r.r(L),r.d(L,{AvatarName:function(){return V}});var T=r(15009),f=r.n(T),E=r(99289),b=r.n(E),Y=r(5574),F=r.n(Y),$=r(70343),w=r(37476),R=r(5966),P=r(94272),A=r(2453),i=r(2487),j=r(83622),N=r(67294),o=r(85893),V=function(){var e=(0,P.useModel)("@@initialState"),n=e.initialState,h=n||{},c=h.userInfo;return c==null?void 0:c.username},x=function(){var e=(0,P.useIntl)(),n=(0,P.useModel)("@@initialState"),h=n.initialState,c=n.loading,Z=n.refresh,B=n.setInitialState,s=(0,N.useState)(!1),g=F()(s,2),C=g[0],I=g[1],v=(0,N.useState)(!1),S=F()(v,2),H=S[0],_=S[1],G=function(){var K=b()(f()().mark(function y(U){var M;return f()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,$.C2)(U.username);case 3:if(M=t.sent,M.code===0){t.next=9;break}if(M.code!=-2){t.next=8;break}return A.ZP.error(M.msg),t.abrupt("return",!1);case 8:throw M.msg;case 9:return Z(),A.ZP.success(e.formatMessage({id:"pages.vipList.update.success"})),t.abrupt("return",!0);case 14:return t.prev=14,t.t0=t.catch(0),A.ZP.error(e.formatMessage({id:"pages.vipList.update.error"})),t.abrupt("return",!1);case 18:case"end":return t.stop()}},y,null,[[0,14]])}));return function(U){return K.apply(this,arguments)}}(),Q=function(){var K=b()(f()().mark(function y(U){var M;return f()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(U.password==U.passwordAgain){t.next=3;break}return A.ZP.error(e.formatMessage({id:"enteredPasswordsDiffer"})),t.abrupt("return",!1);case 3:return t.prev=3,t.next=6,(0,$.$5)(U.oldPassword,U.password);case 6:if(M=t.sent,M.code===0){t.next=12;break}if(M.code!=-2){t.next=11;break}return A.ZP.error(M.msg),t.abrupt("return",!1);case 11:throw M.msg;case 12:return A.ZP.success(e.formatMessage({id:"pages.vipList.update.success"})),t.abrupt("return",!0);case 16:return t.prev=16,t.t0=t.catch(3),A.ZP.error(e.formatMessage({id:"pages.vipList.update.error"})),t.abrupt("return",!1);case 20:case"end":return t.stop()}},y,null,[[3,16]])}));return function(U){return K.apply(this,arguments)}}();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(i.Z,{itemLayout:"horizontal",children:[(0,o.jsx)(i.Z.Item,{actions:[(0,o.jsx)(j.ZP,{type:"link",onClick:function(){I(!0)},children:e.formatMessage({id:"edit"})})],children:(0,o.jsx)(i.Z.Item.Meta,{title:e.formatMessage({id:"username"}),description:e.formatMessage({id:"pages.Accout.Setting.currentUsername"})+": "+V()})}),(0,o.jsx)(i.Z.Item,{actions:[(0,o.jsx)(j.ZP,{type:"link",onClick:function(){_(!0)},children:e.formatMessage({id:"edit"})})],children:(0,o.jsx)(i.Z.Item.Meta,{title:e.formatMessage({id:"password"}),description:e.formatMessage({id:"pages.Accout.Setting.password.description"})})})]}),(0,o.jsx)(w.Y,{title:e.formatMessage({id:"editUsername"}),open:C,onFinish:G,onOpenChange:I,children:(0,o.jsx)(R.Z,{name:"username",fieldProps:{maxLength:24},rules:[{required:!0,message:"Please enter username!"},{min:5,message:"length min 5"}]})}),(0,o.jsxs)(w.Y,{title:e.formatMessage({id:"editPassword"}),open:H,onFinish:Q,onOpenChange:_,children:[(0,o.jsx)(R.Z.Password,{name:"oldPassword",fieldProps:{maxLength:24},label:e.formatMessage({id:"pages.Accout.Setting.oldPassword"}),rules:[{required:!0,message:"Please enter new password!"},{min:6,message:e.formatMessage({id:"pages.Accout.Setting.password.description"})}]}),(0,o.jsx)(R.Z.Password,{name:"password",fieldProps:{maxLength:24},label:e.formatMessage({id:"pages.Accout.Setting.newPassword"}),rules:[{required:!0,message:"Please enter new password!"},{min:6,message:e.formatMessage({id:"pages.Accout.Setting.password.description"})}]}),(0,o.jsx)(R.Z.Password,{name:"passwordAgain",fieldProps:{maxLength:24},label:e.formatMessage({id:"pages.Accout.Setting.reEnter"}),rules:[{required:!0,message:"Please enter new password!"},{min:6,message:e.formatMessage({id:"pages.Accout.Setting.password.description"})}]})]})]})};L.default=x}}]);
